(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[515],{47515:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var s=r(57437),n=r(2265),a=r(16691),i=r.n(a),o=r(61396),l=r.n(o),c=r(70680),d=r(12431),u=r(60345);function h(e){let{property:t}=e,{user:r}=(0,c.a)(),[a,o]=(0,n.useState)(t.is_favorited||!1),[h,m]=(0,n.useState)(!1),x=t.estimated_cash_flow>0?"positive":t.estimated_cash_flow<0?"negative":"neutral",f=async()=>{if(!r){window.location.href="/login?redirectUrl=/properties/".concat(t.id);return}m(!0);try{if(a){let{error:e}=await d.O.from("favorite_properties").delete().eq("user_id",r.id).eq("property_id",t.id);if(e)throw e}else{let{error:e}=await d.O.from("favorite_properties").insert({user_id:r.id,property_id:t.id});if(e)throw e}o(!a)}catch(e){console.error("Error toggling favorite status:",e)}finally{m(!1)}};return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,s.jsxs)("div",{className:"relative h-48 w-full",children:[t.photos_json&&t.photos_json.length>0?(0,s.jsx)(i(),{src:t.photos_json[0],alt:t.address,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",className:"object-cover"}):(0,s.jsx)("div",{className:"h-full w-full flex items-center justify-center bg-gray-200",children:(0,s.jsx)("span",{className:"text-gray-400",children:"No image available"})}),(0,s.jsx)("button",{onClick:f,disabled:h,className:"absolute top-2 right-2 p-2 bg-white rounded-full shadow-md hover:bg-gray-100 focus:outline-none","aria-label":a?"Remove from favorites":"Add to favorites",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:a?"currentColor":"none",stroke:"currentColor",className:"w-6 h-6 ".concat(a?"text-red-500":"text-gray-400"),children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)(l(),{href:"/properties/".concat(t.id),children:(0,s.jsx)("h3",{className:"text-lg font-semibold mb-1 text-gray-900 hover:text-primary",children:t.address})}),(0,s.jsxs)("p",{className:"text-gray-600 mb-2",children:[t.city,", ",t.state," ",t.zip]}),(0,s.jsx)("p",{className:"text-xl font-bold text-primary mb-3",children:(0,u.xG)(t.price)}),(0,s.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,s.jsxs)("span",{children:[t.beds," bd"]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,s.jsxs)("span",{children:[t.baths," ba"]})]}),t.sqft&&(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 4h-4m4 0l-5-5"})}),(0,s.jsxs)("span",{children:[t.sqft," sqft"]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 -mx-4 px-4 py-3 mt-3 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Fair Market Rent"}),(0,s.jsx)("p",{className:"font-medium",children:t.fair_market_rent?(0,u.xG)(t.fair_market_rent)+"/mo":"No data available"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Est. Mortgage"}),(0,s.jsxs)("p",{className:"font-medium",children:[(0,u.xG)(t.estimated_mortgage),"/mo"]})]})]}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Est. Cash Flow"}),(0,s.jsx)("p",{className:"font-bold ".concat({positive:"text-green-600",negative:"text-red-600",neutral:"text-gray-600"}[x]),children:null!==t.estimated_cash_flow?(0,u.xG)(t.estimated_cash_flow)+"/mo":"No data available"})]})]})]})]})}},70680:function(e,t,r){"use strict";r.d(t,{H:function(){return o},a:function(){return l}});var s=r(57437),n=r(2265),a=r(12431);let i=(0,n.createContext)(void 0);function o(e){let{children:t}=e,[r,o]=(0,n.useState)(null),[l,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let{data:{subscription:e}}=a.O.auth.onAuthStateChange((e,t)=>{var r;c(t),o(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),u(!1)});return a.O.auth.getSession().then(e=>{var t;let{data:{session:r}}=e;c(r),o(null!==(t=null==r?void 0:r.user)&&void 0!==t?t:null),u(!1)}),()=>{e.unsubscribe()}},[]);let h=async(e,t)=>{try{let{error:r}=await a.O.auth.signInWithPassword({email:e,password:t});if(r)throw r}catch(e){throw console.error("Error signing in:",e),e}},m=async(e,t)=>{try{let{error:r}=await a.O.auth.signUp({email:e,password:t});if(r)throw r}catch(e){throw console.error("Error signing up:",e),e}},x=async()=>{try{let{error:e}=await a.O.auth.signOut();if(e)throw e}catch(e){throw console.error("Error signing out:",e),e}};return(0,s.jsx)(i.Provider,{value:{user:r,session:l,isLoading:d,signIn:h,signUp:m,signOut:x},children:t})}function l(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},12431:function(e,t,r){"use strict";r.d(t,{O:function(){return i}});var s=r(84756);let n="https://mock-supabase-url.supabase.co",a="mock-anon-key-for-demo-purposes-only";if(!n||!a)throw Error("Missing Supabase environment variables. Please check your .env.local file.");let i=(0,s.eI)(n,a)},60345:function(e,t,r){"use strict";function s(e){if(null==e)return"$0";let t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0});return t.format(e)}function n(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function a(e){return new Intl.NumberFormat("en-US").format(e)}r.d(t,{p6:function(){return n},uf:function(){return a},xG:function(){return s}})},61396:function(e,t,r){e.exports=r(68326)}}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[637],{20104:function(e,t,a){Promise.resolve().then(a.bind(a,59641))},59641:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var n=a(57437),r=a(2265),i=a(24033),s=a(70680),l=a(37389),c=a(81594),o=a(21474),d=a(30767),u=a(73991),h=a(77966),m=a(95427);a(71726);let x=[{id:"coach-1",name:"Sarah Johnson",title:"Section 8 Investment Specialist",image:"https://randomuser.me/api/portraits/women/23.jpg"},{id:"coach-2",name:"Michael Rodriguez",title:"Property Management Expert",image:"https://randomuser.me/api/portraits/men/45.jpg"},{id:"coach-3",name:"Jennifer Lee",title:"Market Analysis Strategist",image:"https://randomuser.me/api/portraits/women/32.jpg"}];function g(){let{coachId:e}=(0,i.useParams)(),t=(0,i.useRouter)(),{user:a}=(0,s.a)(),[g,p]=(0,r.useState)(null),[v,f]=(0,r.useState)(null),[w,j]=(0,r.useState)(null),[b,y]=(0,r.useState)(!0),[N,S]=(0,r.useState)(null);return((0,r.useEffect)(()=>{let t=x.find(t=>t.id===e);if(!t){S("Coach not found"),y(!1);return}if(p(t),!a)return;let n=async()=>{try{var e,n;y(!0),S(null);let r="dz5f4d5kzrue";if(!r)throw Error("Stream API key is missing");let i=m.c8.getInstance(r);await i.connectUser({id:a.id,name:(null===(e=a.email)||void 0===e?void 0:e.split("@")[0])||a.id,image:"https://getstream.io/random_svg/?id=".concat(a.id,"&name=").concat((null===(n=a.email)||void 0===n?void 0:n.split("@")[0])||a.id)},i.devToken(a.id));let s="private-coaching-".concat(a.id,"-").concat(t.id),l=i.channel("messaging",s,{name:"Private Coaching with ".concat(t.name),image:t.image,members:[a.id,t.id]});await l.create(),f(i),j(l)}catch(e){console.error("Error initializing private coaching chat:",e),S("Failed to initialize chat. Please try again later.")}finally{y(!1)}};return n(),()=>{v&&v.disconnectUser()}},[e,a]),a)?b?(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,n.jsx)("div",{className:"flex justify-center my-12",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})}):!N&&v&&w&&g?(0,n.jsx)("div",{className:"h-[calc(100vh-4rem)]",children:(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsx)("div",{className:"bg-white border-b border-gray-200 py-4 px-6",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("button",{onClick:()=>t.push("/coaching"),className:"mr-4 text-gray-500 hover:text-gray-700",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})})}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden mr-3",children:(0,n.jsx)("img",{src:g.image,alt:g.name,className:"w-full h-full object-cover"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-bold",children:g.name}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:g.title})]})]})]}),(0,n.jsx)("a",{href:"https://calendly.com",target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary text-sm",children:"Schedule Session"})]})}),(0,n.jsx)("div",{className:"flex-grow",children:(0,n.jsx)(l.e,{client:v,theme:"messaging light",children:(0,n.jsxs)(c.$,{channel:w,children:[(0,n.jsxs)(o.R,{hideOnThread:!0,children:[(0,n.jsx)(d.r,{}),(0,n.jsx)(u.R,{focus:!0})]}),(0,n.jsx)(h.j,{})]})})})]})}):(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-6",children:N||"Failed to initialize chat"}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("button",{onClick:()=>t.push("/coaching"),className:"btn btn-primary inline-block",children:"Back to Coaching"})})]}):(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,n.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-8",children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,n.jsx)("div",{className:"ml-3",children:(0,n.jsxs)("p",{className:"text-sm text-yellow-700",children:["Please sign in to access coaching chat."," ",(0,n.jsx)("a",{href:"/login",className:"font-medium underline text-yellow-700 hover:text-yellow-600",children:"Sign in here"})]})})]})})})}},70680:function(e,t,a){"use strict";a.d(t,{H:function(){return l},a:function(){return c}});var n=a(57437),r=a(2265),i=a(12431);let s=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[a,l]=(0,r.useState)(null),[c,o]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let{data:{subscription:e}}=i.O.auth.onAuthStateChange((e,t)=>{var a;o(t),l(null!==(a=null==t?void 0:t.user)&&void 0!==a?a:null),u(!1)});return i.O.auth.getSession().then(e=>{var t;let{data:{session:a}}=e;o(a),l(null!==(t=null==a?void 0:a.user)&&void 0!==t?t:null),u(!1)}),()=>{e.unsubscribe()}},[]);let h=async(e,t)=>{try{let{error:a}=await i.O.auth.signInWithPassword({email:e,password:t});if(a)throw a}catch(e){throw console.error("Error signing in:",e),e}},m=async(e,t)=>{try{let{error:a}=await i.O.auth.signUp({email:e,password:t});if(a)throw a}catch(e){throw console.error("Error signing up:",e),e}},x=async()=>{try{let{error:e}=await i.O.auth.signOut();if(e)throw e}catch(e){throw console.error("Error signing out:",e),e}};return(0,n.jsx)(s.Provider,{value:{user:a,session:c,isLoading:d,signIn:h,signUp:m,signOut:x},children:t})}function c(){let e=(0,r.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},12431:function(e,t,a){"use strict";a.d(t,{O:function(){return s}});var n=a(84756);let r="https://mock-supabase-url.supabase.co",i="mock-anon-key-for-demo-purposes-only";if(!r||!i)throw Error("Missing Supabase environment variables. Please check your .env.local file.");let s=(0,n.eI)(r,i)},24033:function(e,t,a){e.exports=a(50094)}},function(e){e.O(0,[171,286,575,36,829,719,998,971,472,744],function(){return e(e.s=20104)}),_N_E=e.O()}]);
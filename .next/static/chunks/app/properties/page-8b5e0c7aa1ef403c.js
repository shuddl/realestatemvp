(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[664],{79029:function(e,t,n){var Symbol=n(42242).Symbol;e.exports=Symbol},86714:function(e,t,n){var Symbol=n(79029),i=n(35078),a=n(76276),r=Symbol?Symbol.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?i(e):a(e)}},13225:function(e,t,n){var i=n(20121),a=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(a,""):e}},66503:function(e,t,n){var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=i},35078:function(e,t,n){var Symbol=n(79029),i=Object.prototype,a=i.hasOwnProperty,r=i.toString,s=Symbol?Symbol.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),n=e[s];try{e[s]=void 0;var i=!0}catch(e){}var l=r.call(e);return i&&(t?e[s]=n:delete e[s]),l}},76276:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},42242:function(e,t,n){var i=n(66503),a="object"==typeof self&&self&&self.Object===Object&&self,r=i||a||Function("return this")();e.exports=r},20121:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},68143:function(e,t,n){var i=n(36905),a=n(14752),r=n(71573),s=Math.max,l=Math.min;e.exports=function(e,t,n){var c,o,d,u,m,p,x=0,h=!1,f=!1,v=!0;if("function"!=typeof e)throw TypeError("Expected a function");function j(t){var n=c,i=o;return c=o=void 0,x=t,u=e.apply(i,n)}function g(e){var n=e-p,i=e-x;return void 0===p||n>=t||n<0||f&&i>=d}function b(){var e,n,i,r=a();if(g(r))return y(r);m=setTimeout(b,(e=r-p,n=r-x,i=t-e,f?l(i,d-n):i))}function y(e){return(m=void 0,v&&c)?j(e):(c=o=void 0,u)}function N(){var e,n=a(),i=g(n);if(c=arguments,o=this,p=n,i){if(void 0===m)return x=e=p,m=setTimeout(b,t),h?j(e):u;if(f)return clearTimeout(m),m=setTimeout(b,t),j(p)}return void 0===m&&(m=setTimeout(b,t)),u}return t=r(t)||0,i(n)&&(h=!!n.leading,d=(f="maxWait"in n)?s(r(n.maxWait)||0,t):d,v="trailing"in n?!!n.trailing:v),N.cancel=function(){void 0!==m&&clearTimeout(m),x=0,c=p=o=m=void 0},N.flush=function(){return void 0===m?u:y(a())},N}},36905:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},12387:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},71087:function(e,t,n){var i=n(86714),a=n(12387);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==i(e)}},14752:function(e,t,n){var i=n(42242);e.exports=function(){return i.Date.now()}},71573:function(e,t,n){var i=n(13225),a=n(36905),r=n(71087),s=0/0,l=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,o=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return s;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=c.test(e);return n||o.test(e)?d(e.slice(2),n?2:8):l.test(e)?s:+e}},34386:function(e,t,n){Promise.resolve().then(n.bind(n,27731))},27731:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var i=n(57437),a=n(2265),r=n(24033),s=n(47515),l=n(68143),c=n.n(l);function o(e){let{filters:t,onFilterChange:n}=e,s=(0,r.useRouter)(),l=(0,r.usePathname)(),[o,d]=(0,a.useState)(t);(0,a.useEffect)(()=>{d(t)},[t]);let u=(0,a.useCallback)(c()(e=>{n(e);let t=new URLSearchParams;Object.entries(e).forEach(e=>{let[n,i]=e;i&&t.append(n,i.toString())});let i=t.toString(),a=i?"".concat(l,"?").concat(i):l;s.push(a)},500),[l,s,n]),m=e=>{let{name:t,value:n}=e.target,i={...o,[t]:n};d(i),u(i)};return(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price Range"}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)("div",{className:"w-1/2",children:(0,i.jsx)("input",{type:"number",name:"minPrice",placeholder:"Min",value:o.minPrice,onChange:m,className:"input w-full"})}),(0,i.jsx)("div",{className:"w-1/2",children:(0,i.jsx)("input",{type:"number",name:"maxPrice",placeholder:"Max",value:o.maxPrice,onChange:m,className:"input w-full"})})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms"}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)("div",{className:"w-1/2",children:(0,i.jsxs)("select",{name:"minBeds",value:o.minBeds,onChange:m,className:"input w-full",children:[(0,i.jsx)("option",{value:"",children:"Min"}),(0,i.jsx)("option",{value:"1",children:"1+"}),(0,i.jsx)("option",{value:"2",children:"2+"}),(0,i.jsx)("option",{value:"3",children:"3+"}),(0,i.jsx)("option",{value:"4",children:"4+"})]})}),(0,i.jsx)("div",{className:"w-1/2",children:(0,i.jsxs)("select",{name:"maxBeds",value:o.maxBeds,onChange:m,className:"input w-full",children:[(0,i.jsx)("option",{value:"",children:"Max"}),(0,i.jsx)("option",{value:"1",children:"1"}),(0,i.jsx)("option",{value:"2",children:"2"}),(0,i.jsx)("option",{value:"3",children:"3"}),(0,i.jsx)("option",{value:"4",children:"4"}),(0,i.jsx)("option",{value:"5",children:"5+"})]})})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bathrooms"}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)("div",{className:"w-1/2",children:(0,i.jsxs)("select",{name:"minBaths",value:o.minBaths,onChange:m,className:"input w-full",children:[(0,i.jsx)("option",{value:"",children:"Min"}),(0,i.jsx)("option",{value:"1",children:"1+"}),(0,i.jsx)("option",{value:"1.5",children:"1.5+"}),(0,i.jsx)("option",{value:"2",children:"2+"}),(0,i.jsx)("option",{value:"2.5",children:"2.5+"}),(0,i.jsx)("option",{value:"3",children:"3+"})]})}),(0,i.jsx)("div",{className:"w-1/2",children:(0,i.jsxs)("select",{name:"maxBaths",value:o.maxBaths,onChange:m,className:"input w-full",children:[(0,i.jsx)("option",{value:"",children:"Max"}),(0,i.jsx)("option",{value:"1",children:"1"}),(0,i.jsx)("option",{value:"1.5",children:"1.5"}),(0,i.jsx)("option",{value:"2",children:"2"}),(0,i.jsx)("option",{value:"2.5",children:"2.5"}),(0,i.jsx)("option",{value:"3",children:"3"}),(0,i.jsx)("option",{value:"4",children:"4+"})]})})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)("div",{className:"w-1/2",children:(0,i.jsx)("input",{type:"text",name:"city",placeholder:"City",value:o.city,onChange:m,className:"input w-full"})}),(0,i.jsx)("div",{className:"w-1/2",children:(0,i.jsx)("input",{type:"text",name:"zip",placeholder:"Zip",value:o.zip,onChange:m,className:"input w-full"})})]})]})]}),(0,i.jsx)("div",{className:"mt-4 text-right",children:(0,i.jsx)("button",{onClick:()=>{let e={minPrice:"",maxPrice:"",minBeds:"",maxBeds:"",minBaths:"",maxBaths:"",city:"",zip:""};d(e),n(e),s.push(l)},className:"text-sm text-primary hover:text-primary/80 font-medium",children:"Reset Filters"})})]})}function d(){let e=(0,r.useSearchParams)(),[t,n]=(0,a.useState)([]),[l,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(null),[m,p]=(0,a.useState)(!1),[x,h]=(0,a.useState)(1),[f,v]=(0,a.useState)({minPrice:"",maxPrice:"",minBeds:"",maxBeds:"",minBaths:"",maxBaths:"",city:"",zip:""});(0,a.useEffect)(()=>{let t=e.get("minPrice")||"",n=e.get("maxPrice")||"",i=e.get("minBeds")||"",a=e.get("maxBeds")||"",r=e.get("minBaths")||"",s=e.get("maxBaths")||"",l=e.get("city")||"",c=e.get("zip")||"";v({minPrice:t,maxPrice:n,minBeds:i,maxBeds:a,minBaths:r,maxBaths:s,city:l,zip:c})},[e]),(0,a.useEffect)(()=>{j()},[f,x]);let j=async()=>{c(!0),u(null);try{let e=new URLSearchParams;f.minPrice&&e.append("minPrice",f.minPrice),f.maxPrice&&e.append("maxPrice",f.maxPrice),f.minBeds&&e.append("minBeds",f.minBeds),f.maxBeds&&e.append("maxBeds",f.maxBeds),f.minBaths&&e.append("minBaths",f.minBaths),f.maxBaths&&e.append("maxBaths",f.maxBaths),f.city&&e.append("city",f.city),f.zip&&e.append("zip",f.zip),e.append("limit","12"),e.append("offset",((x-1)*12).toString());let t=await fetch("/api/properties?".concat(e.toString()));if(!t.ok)throw Error("Failed to fetch properties");let i=await t.json();1===x?n(i.properties):n(e=>[...e,...i.properties]),p(i.hasMore)}catch(e){console.error("Error fetching properties:",e),u("Failed to fetch properties. Please try again later.")}finally{c(!1)}};return(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Section 8 Properties"}),(0,i.jsx)(o,{filters:f,onFilterChange:e=>{v(e),h(1)}}),d&&(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-6",children:d}),l&&1===x?(0,i.jsx)("div",{className:"flex justify-center my-12",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):0===t.length?(0,i.jsx)("div",{className:"text-center my-12",children:(0,i.jsx)("p",{className:"text-gray-500 text-lg",children:"No properties found matching your criteria."})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:t.map(e=>(0,i.jsx)(s.Z,{property:e},e.id))}),m&&(0,i.jsx)("div",{className:"flex justify-center mt-8 mb-12",children:(0,i.jsx)("button",{onClick:()=>{h(e=>e+1)},disabled:l,className:"btn btn-primary px-6",children:l?"Loading...":"Load More"})})]})]})}},24033:function(e,t,n){e.exports=n(50094)}},function(e){e.O(0,[36,326,691,515,971,472,744],function(){return e(e.s=34386)}),_N_E=e.O()}]);
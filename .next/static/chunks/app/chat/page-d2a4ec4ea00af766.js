(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{1842:function(e,t,s){Promise.resolve().then(s.bind(s,6696))},6696:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var n=s(57437),a=s(2265),r=s(70680),i=s(37389),l=s(82434),o=s(81594),c=s(21474),d=s(93480),u=s(30767),m=s(73991),h=s(77966),x=s(95427);function g(){let{user:e}=(0,r.a)(),[t,s]=(0,a.useState)(null),[g,v]=(0,a.useState)(!0),[f,p]=(0,a.useState)(null);return((0,a.useEffect)(()=>{if(!e)return;let n=async()=>{try{var t,n;v(!0),p(null);let a="dz5f4d5kzrue";if(!a)throw Error("Stream API key is missing");let r=x.c8.getInstance(a);await r.connectUser({id:e.id,name:(null===(t=e.email)||void 0===t?void 0:t.split("@")[0])||e.id,image:"https://getstream.io/random_svg/?id=".concat(e.id,"&name=").concat((null===(n=e.email)||void 0===n?void 0:n.split("@")[0])||e.id)},r.devToken(e.id));let i=r.channel("messaging","general",{name:"General",image:"https://getstream.io/random_svg/?id=general&name=General"}),l=r.channel("messaging","deals",{name:"Deal Discussions",image:"https://getstream.io/random_svg/?id=deals&name=Deals"}),o=r.channel("messaging","marketing",{name:"Marketing & Growth",image:"https://getstream.io/random_svg/?id=marketing&name=Marketing"}),c=r.channel("messaging","questions",{name:"Q&A",image:"https://getstream.io/random_svg/?id=questions&name=Questions"});await Promise.all([i.create(),l.create(),o.create(),c.create()]),s(r)}catch(e){console.error("Error initializing chat:",e),p("Failed to initialize chat. Please try again later.")}finally{v(!1)}};return n(),()=>{t&&t.disconnectUser()}},[e]),e)?g?(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,n.jsx)("div",{className:"flex justify-center my-12",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})}):f||!t?(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-6",children:f||"Failed to initialize chat"}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("button",{onClick:()=>window.location.reload(),className:"btn btn-primary inline-block",children:"Try Again"})})]}):(0,n.jsx)("div",{className:"h-[calc(100vh-4rem)]",children:(0,n.jsx)("div",{className:"flex h-full",children:(0,n.jsx)(i.e,{client:t,theme:"messaging light",children:(0,n.jsxs)("div",{className:"flex h-full w-full",children:[(0,n.jsxs)("div",{className:"w-1/4 h-full bg-white border-r border-gray-200",children:[(0,n.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,n.jsx)("h2",{className:"text-lg font-bold",children:"Section 8 Community"}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Connect with other investors"})]}),(0,n.jsx)(l.G,{filters:{type:"messaging",members:{$in:[e.id]}},sort:{last_message_at:-1},options:{state:!0,watch:!0}})]}),(0,n.jsx)("div",{className:"w-3/4 h-full flex flex-col",children:(0,n.jsxs)(o.$,{children:[(0,n.jsxs)(c.R,{children:[(0,n.jsx)(d.g,{}),(0,n.jsx)(u.r,{}),(0,n.jsx)(m.R,{})]}),(0,n.jsx)(h.j,{})]})})]})})})}):(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,n.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-8",children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,n.jsx)("div",{className:"ml-3",children:(0,n.jsxs)("p",{className:"text-sm text-yellow-700",children:["Please sign in to access the community chat."," ",(0,n.jsx)("a",{href:"/login",className:"font-medium underline text-yellow-700 hover:text-yellow-600",children:"Sign in here"})]})})]})})})}s(71726)},70680:function(e,t,s){"use strict";s.d(t,{H:function(){return l},a:function(){return o}});var n=s(57437),a=s(2265),r=s(12431);let i=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,a.useState)(null),[o,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let{data:{subscription:e}}=r.O.auth.onAuthStateChange((e,t)=>{var s;c(t),l(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null),u(!1)});return r.O.auth.getSession().then(e=>{var t;let{data:{session:s}}=e;c(s),l(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null),u(!1)}),()=>{e.unsubscribe()}},[]);let m=async(e,t)=>{try{let{error:s}=await r.O.auth.signInWithPassword({email:e,password:t});if(s)throw s}catch(e){throw console.error("Error signing in:",e),e}},h=async(e,t)=>{try{let{error:s}=await r.O.auth.signUp({email:e,password:t});if(s)throw s}catch(e){throw console.error("Error signing up:",e),e}},x=async()=>{try{let{error:e}=await r.O.auth.signOut();if(e)throw e}catch(e){throw console.error("Error signing out:",e),e}};return(0,n.jsx)(i.Provider,{value:{user:s,session:o,isLoading:d,signIn:m,signUp:h,signOut:x},children:t})}function o(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},12431:function(e,t,s){"use strict";s.d(t,{O:function(){return i}});var n=s(84756);let a="https://mock-supabase-url.supabase.co",r="mock-anon-key-for-demo-purposes-only";if(!a||!r)throw Error("Missing Supabase environment variables. Please check your .env.local file.");let i=(0,n.eI)(a,r)}},function(e){e.O(0,[171,286,575,36,829,719,998,798,971,472,744],function(){return e(e.s=1842)}),_N_E=e.O()}]);
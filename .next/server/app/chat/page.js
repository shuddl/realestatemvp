(()=>{var e={};e.id=929,e.ids=[929],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},47193:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>d,pages:()=>u,routeModule:()=>m,tree:()=>o});var r=n(67096),a=n(16132),s=n(37284),i=n.n(s),c=n(32564),l={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);n.d(t,l);let o=["",{children:["chat",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,65005)),"/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/chat/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,447)),"/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,9291,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/chat/page.tsx"],d="/chat/page",h={require:n,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/chat/page",pathname:"/chat",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},40305:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,53579,23)),Promise.resolve().then(n.t.bind(n,30619,23)),Promise.resolve().then(n.t.bind(n,81459,23)),Promise.resolve().then(n.t.bind(n,13456,23)),Promise.resolve().then(n.t.bind(n,50847,23)),Promise.resolve().then(n.t.bind(n,57303,23))},63308:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,67490,23)),Promise.resolve().then(n.bind(n,554))},74427:(e,t,n)=>{Promise.resolve().then(n.bind(n,36774))},36774:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>eS});var r,a=n(53854),s=n(34218),i=n.n(s),c=n(554),l=n(21812),o=n(44909),u=n(29395),d=n(34261),h=function(){return i().createElement("svg",{height:"78px",version:"1.1",viewBox:"0 0 78 78",width:"78px",xmlns:"http://www.w3.org/2000/svg"},i().createElement("title",null,"Connection Error"),i().createElement("g",{fill:"none",fillRule:"evenodd",id:"Interactions",stroke:"none",strokeWidth:"1"},i().createElement("g",{fill:"#CF1F25",id:"Connection-Error-_-Connectivity",transform:"translate(-270.000000, -30.000000)"},i().createElement("g",{id:"109-network-connection",transform:"translate(270.000000, 30.000000)"},i().createElement("path",{d:"M66.4609744,11.414231 C81.6225232,26.5757798 81.6225232,51.157545 66.4609744,66.3188467 C51.2994256,81.4803954 26.7176604,81.4803954 11.5563587,66.3188467 C-3.60519004,51.1572979 -3.60519004,26.5755327 11.5563587,11.414231 C26.7179075,-3.74731776 51.2996727,-3.74731776 66.4609744,11.414231 Z M54.7853215,45.8823776 L54.7853215,40.5882574 C54.7853215,39.613638 53.9952341,38.8235506 53.0206147,38.8235506 L44.9576695,38.8235506 L41.428256,42.3529641 L51.255555,42.3529641 L51.255555,45.8823776 L54.7853215,45.8823776 Z M40.6659027,43.1153174 L37.8988425,45.8823776 L40.6659027,45.8823776 L40.6659027,43.1153174 Z M51.1764962,56.4702653 L58.2353232,56.4702653 C59.2099355,56.4702653 60.00003,55.6801708 60.00003,54.7055585 L60.00003,51.176145 C60.00003,50.2015327 59.2099355,49.4114382 58.2353232,49.4114382 L51.1764962,49.4114382 C50.2018839,49.4114382 49.4117894,50.2015327 49.4117894,51.176145 L49.4117894,54.7055585 C49.4117894,55.6801708 50.2018839,56.4702653 51.1764962,56.4702653 Z M35.2941353,56.4702653 L42.3529624,56.4702653 C43.3275746,56.4702653 44.1176691,55.6801708 44.1176691,54.7055585 L44.1176691,51.176145 C44.1176691,50.2015327 43.3275746,49.4114382 42.3529624,49.4114382 L35.2941353,49.4114382 C34.319523,49.4114382 33.5294285,50.2015327 33.5294285,51.176145 L33.5294285,54.7055585 C33.5294285,55.6801708 34.319523,56.4702653 35.2941353,56.4702653 Z M56.6964989,19.0874231 C56.007381,18.3985134 54.8903216,18.3985134 54.2012036,19.087423 L45.882376,27.4062507 L45.882376,19.4117761 C45.882376,18.4371568 45.0922885,17.6470693 44.1176692,17.6470693 L33.5294286,17.6470693 C32.5548092,17.6470694 31.7647218,18.4371568 31.7647218,19.4117761 L31.7647218,30.0000167 C31.7647219,30.9746363 32.5548092,31.7647237 33.5294285,31.7647237 L41.5239031,31.7647237 L34.4650761,38.8235508 L24.7058947,38.8235508 C23.7312753,38.8235508 22.9411879,39.6136382 22.9411879,40.5882575 L22.9411879,45.8823778 L26.4706014,45.8823778 L26.4706014,42.3529643 L30.9356624,42.3529643 L23.8768354,49.4117914 L19.4117743,49.4117914 C18.4371549,49.4117914 17.6470675,50.2018788 17.6470675,51.1764981 L17.6470675,54.7059117 C17.6504049,54.9674302 17.7129076,55.2248042 17.8298886,55.4587302 L16.4456526,56.8429662 C15.7446193,57.5200453 15.7252005,58.6372282 16.4022825,59.3382615 C17.0793616,60.0392948 18.1965445,60.0587136 18.8975778,59.3816316 C18.9122847,59.3674273 18.9267436,59.3529684 18.940948,59.3382615 L56.6964963,21.5830662 C57.3856425,20.8939094 57.3856425,19.7765747 56.6964963,19.0874179 Z",id:"Combined-Shape"})))))},m=i().memo(function(e){var t=e.image,n=void 0===t?i().createElement(h,null):t,r=e.text,a=e.type,s=(0,d.Ht)("ChatDown").t;return i().createElement("div",{className:"str-chat__down"},i().createElement("div",{className:"str-chat__down-main"},"string"==typeof n?i().createElement("img",{alt:"Connection error","data-testid":"chatdown-img",src:n}):n,i().createElement("h1",null,void 0===a?"Error":a),i().createElement("h3",{"aria-live":"assertive"},r||s("Error connecting to chat, refresh the page to try again."))))}),v=function(){return i().createElement("div",{className:"str-chat__loading-channels-item str-chat__channel-preview-loading"},i().createElement("div",{className:"str-chat__loading-channels-avatar"}),i().createElement("div",{className:"str-chat__loading-channels-meta str-chat__channel-preview-end-loading"},i().createElement("div",{className:"str-chat__loading-channels-username"}),i().createElement("div",{className:"str-chat__loading-channels-status"})))},f=i().memo(function(){return i().createElement("div",{className:"str-chat__loading-channels"},i().createElement(v,null),i().createElement(v,null),i().createElement(v,null))}),p=function(e){var t=e.children,n=e.error,r=e.loading,a=e.LoadingErrorIndicator,s=e.LoadingIndicator;return(void 0===n?null:n)?i().createElement(void 0===a?m:a,{type:"Connection Error"}):r?i().createElement(void 0===s?f:s,null):i().createElement("div",{className:"str-chat__channel-list-messenger str-chat__channel-list-messenger-react"},i().createElement("div",{"aria-label":"Channel list",className:"str-chat__channel-list-messenger__main str-chat__channel-list-messenger-react__main",role:"listbox"},t))},g=n(34581),x=function(e,t){var n=(0,g.mx)("useChannelDeletedListener").client;(0,s.useEffect)(function(){var r=function(n){t&&"function"==typeof t?t(e,n):e(function(e){var t=e.findIndex(function(e){return e.cid===n.cid});return t<0||e.splice(t,1),(0,o.ev)([],e,!0)})};return n.on("channel.deleted",r),function(){n.off("channel.deleted",r)}},[t])},E=function(e,t){var n=(0,g.mx)("useChannelHiddenListener").client;(0,s.useEffect)(function(){var r=function(n){t&&"function"==typeof t?t(e,n):e(function(e){var t=e.findIndex(function(e){return e.cid===n.cid});return t<0||e.splice(t,1),(0,o.ev)([],e,!0)})};return n.on("channel.hidden",r),function(){n.off("channel.hidden",r)}},[t])},_=function(e,t,n){var r=(0,g.mx)("useChannelTruncatedListener").client;(0,s.useEffect)(function(){var a=function(r){e(function(e){return(0,o.ev)([],e,!0)}),t&&"function"==typeof t&&t(e,r),n&&n()};return r.on("channel.truncated",a),function(){r.off("channel.truncated",a)}},[t])},b=function(e,t,n){var r=(0,g.mx)("useChannelUpdatedListener").client;(0,s.useEffect)(function(){var a=function(r){e(function(e){var t,n,a,s,i,c,l=e.findIndex(function(e){var t;return e.cid===(null===(t=r.channel)||void 0===t?void 0:t.cid)});return l>-1&&r.channel?(e[l].data=(0,o.pi)((0,o.pi)({},r.channel),{hidden:null!==(n=null===(t=r.channel)||void 0===t?void 0:t.hidden)&&void 0!==n?n:null===(a=e[l].data)||void 0===a?void 0:a.hidden,own_capabilities:null!==(i=null===(s=r.channel)||void 0===s?void 0:s.own_capabilities)&&void 0!==i?i:null===(c=e[l].data)||void 0===c?void 0:c.own_capabilities}),(0,o.ev)([],e,!0)):e}),n&&n(),t&&"function"==typeof t&&t(e,r)};return r.on("channel.updated",a),function(){r.off("channel.updated",a)}},[t])},C=n(3530),w=n.n(C),y=n(61508),S=function(e,t){var n=(0,g.mx)("useChannelVisibleListener").client;(0,s.useEffect)(function(){var r=function(r){return(0,o.mG)(void 0,void 0,void 0,function(){var a;return(0,o.Jh)(this,function(s){switch(s.label){case 0:if(!(t&&"function"==typeof t))return[3,1];return t(e,r),[3,3];case 1:if(!(r.type&&r.channel_type&&r.channel_id))return[3,3];return[4,(0,y.m)({client:n,id:r.channel_id,type:r.channel_type})];case 2:a=s.sent(),e(function(e){return w()((0,o.ev)([a],e,!0),"cid")}),s.label=3;case 3:return[2]}})})};return n.on("channel.visible",r),function(){n.off("channel.visible",r)}},[t])},L=function(e){var t=(0,g.mx)("useConnectionRecoveredListener").client;(0,s.useEffect)(function(){var n=function(){e&&e()};return t.on("connection.recovered",n),function(){t.off("connection.recovered",n)}},[])},N=function(e){var t=e.activeChannel,n=e.channels,r=e.cid,a=n.findIndex(function(e){return e.cid===r});if(!t&&a<=0)return n;var s=t||n[a];return w()((0,o.ev)([s],n,!0),"cid")},R=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0);var r=(0,g.mx)("useMessageNewListener").client;(0,s.useEffect)(function(){var a=function(a){e(function(e){if(!(e.filter(function(e){return e.cid===a.cid}).length>0)&&n&&a.channel_type){var s=r.channel(a.channel_type,a.channel_id);return w()((0,o.ev)([s],e,!0),"cid")}return t?e:N({channels:e,cid:a.cid||""})})};return r.on("message.new",a),function(){r.off("message.new",a)}},[t])},I=function(e,t,n){(0,s.useEffect)(function(){var r=function(r){n&&e.current&&!e.current.contains(r.target)&&t&&n()};return document.addEventListener("click",r),function(){document.removeEventListener("click",r)}},[e,n,t])},k=function(e,t,n){void 0===n&&(n=!0);var r=(0,g.mx)("useNotificationAddedToChannelListener").client;(0,s.useEffect)(function(){var a=function(a){return(0,o.mG)(void 0,void 0,void 0,function(){var s,i,c;return(0,o.Jh)(this,function(l){switch(l.label){case 0:if(!(t&&"function"==typeof t))return[3,1];return t(e,a),[3,3];case 1:if(!(n&&(null===(i=a.channel)||void 0===i?void 0:i.type)))return[3,3];return[4,(0,y.m)({client:r,id:a.channel.id,members:null===(c=a.channel.members)||void 0===c?void 0:c.reduce(function(e,t){var n=t.user,r=t.user_id||(null==n?void 0:n.id);return r&&e.push(r),e},[]),type:a.channel.type})];case 2:s=l.sent(),e(function(e){return w()((0,o.ev)([s],e,!0),"cid")}),l.label=3;case 3:return[2]}})})};return r.on("notification.added_to_channel",a),function(){r.off("notification.added_to_channel",a)}},[t])},j=function(e,t,n){void 0===n&&(n=!0);var r=(0,g.mx)("useNotificationMessageNewListener").client;(0,s.useEffect)(function(){var a=function(a){return(0,o.mG)(void 0,void 0,void 0,function(){var s,i;return(0,o.Jh)(this,function(c){switch(c.label){case 0:if(!(t&&"function"==typeof t))return[3,1];return t(e,a),[3,3];case 1:if(!(n&&(null===(i=a.channel)||void 0===i?void 0:i.type)))return[3,3];return[4,(0,y.m)({client:r,id:a.channel.id,type:a.channel.type})];case 2:s=c.sent(),e(function(e){return w()((0,o.ev)([s],e,!0),"cid")}),c.label=3;case 3:return[2]}})})};return r.on("notification.message_new",a),function(){r.off("notification.message_new",a)}},[t])},M=function(e,t){var n=(0,g.mx)("useNotificationRemovedFromChannelListener").client;(0,s.useEffect)(function(){var r=function(n){t&&"function"==typeof t?t(e,n):e(function(e){return e.filter(function(e){var t;return e.cid!==(null===(t=n.channel)||void 0===t?void 0:t.cid)})})};return n.on("notification.removed_from_channel",r),function(){n.off("notification.removed_from_channel",r)}},[t])},P=function(e,t,n,r,a,i){void 0===i&&(i=5e3);var c=(0,g.mx)("usePaginatedChannels").channelsQueryState,l=c.error,u=c.setError,d=c.setQueryInProgress,h=(0,s.useState)([]),m=h[0],v=h[1],f=(0,s.useState)(!0),p=f[0],x=f[1],E=(0,s.useRef)(),_=i<2e3?2e3:i||5e3,b=(0,s.useMemo)(function(){return JSON.stringify(t)},[t]),C=(0,s.useMemo)(function(){return JSON.stringify(n)},[n]),y=function(s){return(0,o.mG)(void 0,void 0,void 0,function(){var i,c,l,h,f,p;return(0,o.Jh)(this,function(g){switch(g.label){case 0:u(null),"reload"===s?(v([]),d("reload")):d("load-more"),i="reload"===s?0:m.length,c=(0,o.pi)({limit:null!==(p=null==r?void 0:r.limit)&&void 0!==p?p:30,offset:i},r),g.label=1;case 1:return g.trys.push([1,3,,4]),[4,e.queryChannels(t,n||{},c)];case 2:return l=g.sent(),v(h="reload"===s?l:w()((0,o.ev)((0,o.ev)([],m,!0),l,!0),"cid")),x(l.length>=c.limit),!i&&a&&a(h,v),[3,4];case 3:return console.warn(f=g.sent()),u(f),[3,4];case 4:return d(null),[2]}})})},S=(0,s.useCallback)(function(){var e=Date.now(),t=!E.current,n=E.current?e-E.current:0;(t||!(n<_)||l)&&(E.current=e,y("reload"))},[l,y,_]);return(0,s.useEffect)(function(){if(!e.recoverStateOnReconnect){var t=e.on("connection.recovered",S).unsubscribe;return function(){t()}}},[e,S]),(0,s.useEffect)(function(){y("reload")},[b,C]),{channels:m,hasNextPage:p,loadNextPage:function(){y()},setChannels:v}},q=function(e){var t=(0,g.mx)("useUserPresenceChangedListener").client;(0,s.useEffect)(function(){var n=function(t){e(function(e){var n=e.map(function(e){var n;return(null===(n=t.user)||void 0===n?void 0:n.id)&&e.state.members[t.user.id]&&(e.state.members[t.user.id].user=t.user),e});return(0,o.ev)([],n,!0)})};return t.on("user.presence.changed",n),function(){t.off("user.presence.changed",n)}},[])},A=n(58098),H=i().memo(function(e){var t,n,r=e.active,a=e.Avatar,c=void 0===a?A.q:a,l=e.channel,o=e.className,d=e.displayImage,h=e.displayTitle,m=e.latestMessage,v=e.onSelect,f=e.setActiveChannel,p=e.unread,g=e.watchers,x=(0,s.useRef)(null),E=h||(null===(n=null===(t=l.state.messages[l.state.messages.length-1])||void 0===t?void 0:t.user)||void 0===n?void 0:n.id);return i().createElement("button",{"aria-label":"Select Channel: ".concat(h||""),"aria-selected":r,className:(0,u.Z)("str-chat__channel-preview-messenger str-chat__channel-preview",r&&"str-chat__channel-preview-messenger--active",p&&p>=1&&"str-chat__channel-preview-messenger--unread",void 0===o?"":o),"data-testid":"channel-preview-button",onClick:function(e){v?v(e):f&&f(l,g),(null==x?void 0:x.current)&&x.current.blur()},ref:x,role:"option"},i().createElement("div",{className:"str-chat__channel-preview-messenger--left"},i().createElement(c,{image:d,name:E,size:40})),i().createElement("div",{className:"str-chat__channel-preview-messenger--right str-chat__channel-preview-end"},i().createElement("div",{className:"str-chat__channel-preview-end-first-row"},i().createElement("div",{className:"str-chat__channel-preview-messenger--name"},i().createElement("span",null,h)),!!p&&i().createElement("div",{className:"str-chat__channel-preview-unread-badge","data-testid":"unread-badge"},p)),i().createElement("div",{className:"str-chat__channel-preview-messenger--last-message"},m)))}),D=function(e){var t=(0,g.mx)("useIsChannelMuted").client,n=(0,s.useState)(e.muteStatus()),r=n[0],a=n[1];return(0,s.useEffect)(function(){var n=function(){return a(e.muteStatus())};return t.on("notification.channel_mutes_updated",n),function(){return t.off("notification.channel_mutes_updated",n)}},[r]),r},F=n(68007),U=n(49454);!function(e){e.DELIVERED="delivered",e.READ="read"}(r||(r={}));var T=function(e){var t=e.channel,n=e.lastMessage,a=(0,g.mx)().client,i=(0,s.useState)(),c=i[0],l=i[1],o=(0,s.useCallback)(function(e){var t;return a.user&&(null===(t=null==e?void 0:e.user)||void 0===t?void 0:t.id)===a.user.id},[a]);return(0,s.useEffect)(function(){var e=o(n);if((null==n?void 0:n.created_at)&&e){var s="string"==typeof n.created_at?new Date(n.created_at):n.created_at;l(Object.values(t.state.read).some(function(e){var t=e.last_read,n=e.user;return a.user&&n.id!==a.user.id&&s<t})?r.READ:r.DELIVERED)}},[t.state.read,a,o,n]),(0,s.useEffect)(function(){var e=function(e){return o(e.message)?l(r.DELIVERED):l(void 0)};return t.on("message.new",e),function(){t.off("message.new",e)}},[t,a,o]),(0,s.useEffect)(function(){if(o(n)){var e=function(e){var t,n;(null===(t=e.user)||void 0===t?void 0:t.id)!==(null===(n=a.user)||void 0===n?void 0:n.id)&&l(r.READ)};return t.on("message.read",e),function(){t.off("message.read",e)}}},[t,a,n,o]),{messageDeliveryStatus:c}},G=function(e){var t=e.channel,n=e.Preview,r=void 0===n?H:n,a=e.channelUpdateCount,c=(0,g.mx)("ChannelPreview"),l=c.channel,u=c.client,h=c.setActiveChannel,m=(0,d.Ht)("ChannelPreview"),v=m.t,f=m.userLanguage,p=(0,F.y)({channel:t}),x=p.displayImage,E=p.displayTitle,_=(0,s.useState)(t.state.messages[t.state.messages.length-1]),b=_[0],C=_[1],w=(0,s.useState)(0),y=w[0],S=w[1],L=T({channel:t,lastMessage:b}).messageDeliveryStatus,N=(null==l?void 0:l.cid)===t.cid,R=D(t).muted;(0,s.useEffect)(function(){var e=function(e){if(!e.cid)return S(0);t.cid===e.cid&&S(0)};return u.on("notification.mark_read",e),function(){return u.off("notification.mark_read",e)}},[]);var I=(0,s.useCallback)(function(){N||R?S(0):S(t.countUnread())},[t,N,R]);if((0,s.useEffect)(function(){I();var e=function(e){e.message&&C(e.message),I()};return t.on("message.new",e),t.on("message.updated",e),t.on("message.deleted",e),function(){t.off("message.new",e),t.off("message.updated",e),t.off("message.deleted",e)}},[I,a]),!r)return null;var k=(0,U.x4)(t,v,f);return i().createElement(r,(0,o.pi)({},e,{active:N,displayImage:x,displayTitle:E,lastMessage:b,latestMessage:k,messageDeliveryStatus:L,setActiveChannel:h,unread:y}))},O=n(28179),Z=n.n(O),z=function(e){return null!=e.cid},V=function(e){var t=e.channelType,n=void 0===t?"messaging":t,r=e.clearSearchOnClickOutside,a=void 0===r||r,i=e.disabled,c=void 0!==i&&i,l=e.onSearch,u=e.onSearchExit,d=e.onSelectResult,h=e.searchDebounceIntervalMs,m=void 0===h?300:h,v=e.searchForChannels,f=void 0!==v&&v,p=e.searchFunction,x=e.searchQueryParams,E=e.setChannels,_=(0,g.mx)("useChannelSearch"),b=_.client,C=_.setActiveChannel,y=_.themeVersion,S=(0,s.useState)(!1),L=S[0],N=S[1],R=(0,s.useState)(""),I=R[0],k=R[1],j=(0,s.useState)([]),M=j[0],P=j[1],q=(0,s.useState)(!1),A=q[0],H=q[1],D=(0,s.useRef)(),F=(0,s.useRef)(!1),U=(0,s.useRef)(null),T=(0,s.useRef)(null),G=(0,s.useCallback)(function(){k(""),P([]),H(!1),D.current&&(F.current=!0)},[]),O=(0,s.useCallback)(function(){N(!0)},[]),V=(0,s.useCallback)(function(){var e;N(!1),null===(e=U.current)||void 0===e||e.blur(),G(),null==u||u()},[G,u]);(0,s.useEffect)(function(){if(!c){var e=function(e){var t,n;e.target instanceof HTMLElement&&(("2"===y?null===(t=T.current)||void 0===t?void 0:t.contains(e.target):null===(n=U.current)||void 0===n?void 0:n.contains(e.target))||(!L||I)&&!a||V())};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}},[c,L,I,V,a]),(0,s.useEffect)(function(){if(U.current&&!c){var e=function(e){if("Escape"===e.key)return V()};return U.current.addEventListener("keydown",e),function(){var t;null===(t=U.current)||void 0===t||t.removeEventListener("keydown",e)}}},[c]);var B=(0,s.useCallback)(function(e){return(0,o.mG)(void 0,void 0,void 0,function(){var t,r;return(0,o.Jh)(this,function(s){switch(s.label){case 0:if(!b.userID)return[2];if(!d)return[3,2];return[4,d({setQuery:k,setResults:P,setSearching:H},e)];case 1:return s.sent(),[2];case 2:if(!z(e))return[3,3];return C(e),t=e,[3,5];case 3:return[4,(r=b.channel(n,{members:[b.userID,e.id]})).watch()];case 4:s.sent(),C(r),t=r,s.label=5;case 5:return E(function(e){return w()((0,o.ev)([t],e,!0),"cid")}),a&&V(),[2]}})})},[a,b,V,d,C,E]),$=(0,s.useCallback)(function(e){return(0,o.mG)(void 0,void 0,void 0,function(){var t,n,r,a,s,i,c,l,u,d,h,m;return(0,o.Jh)(this,function(v){switch(v.label){case 0:t=[],v.label=1;case 1:if(v.trys.push([1,6,,7]),n=b.queryUsers((0,o.pi)({$or:[{id:{$autocomplete:e}},{name:{$autocomplete:e}}],id:{$ne:b.userID}},null===(c=null==x?void 0:x.userFilters)||void 0===c?void 0:c.filters),(0,o.pi)({id:1},null===(l=null==x?void 0:x.userFilters)||void 0===l?void 0:l.sort),(0,o.pi)({limit:8},null===(u=null==x?void 0:x.userFilters)||void 0===u?void 0:u.options)),f)return[3,3];return D.current=n,[4,D.current];case 2:return t=r=v.sent().users,[3,5];case 3:return a=b.queryChannels((0,o.pi)({name:{$autocomplete:e}},null===(d=null==x?void 0:x.channelFilters)||void 0===d?void 0:d.filters),(null===(h=null==x?void 0:x.channelFilters)||void 0===h?void 0:h.sort)||{},(0,o.pi)({limit:5},null===(m=null==x?void 0:x.channelFilters)||void 0===m?void 0:m.options)),D.current=Promise.all([a,n]),[4,D.current];case 4:i=(s=v.sent())[0],r=s[1].users,t=(0,o.ev)((0,o.ev)([],i,!0),r,!0),v.label=5;case 5:return[3,7];case 6:return console.error(v.sent()),[3,7];case 7:return H(!1),F.current?F.current=!1:P(t),D.current=void 0,[2]}})})},[b,f,x]),J=(0,s.useCallback)(Z()($,m),[$,m]),Q=(0,s.useCallback)(function(e){e.preventDefault(),c||(p?p({setQuery:k,setResults:P,setSearching:H},e):e.target.value?(H(!0),k(e.target.value),J(e.target.value)):e.target.value||(G(),J.cancel()),null==l||l(e))},[G,c,J,l,p]);return{activateSearch:O,clearState:G,exitSearch:V,inputIsFocused:L,inputRef:U,onSearch:Q,query:I,results:M,searchBarRef:T,searching:A,selectResult:B}},B=function(){return i().createElement("svg",{"data-testid":"menu-icon",fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{clipRule:"evenodd",d:"M3 8V6H21V8H3ZM3 13H21V11H3V13ZM3 18H21V16H3V18Z",fill:"black",fillRule:"evenodd"}))},$=function(){return i().createElement("svg",{"data-testid":"return-icon",fill:"none",height:"20",viewBox:"0 0 22 22",width:"20",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{d:"M21.6668 9.66666V12.3333H5.6529L12.9932 19.6736L11.1076 21.5592L0.54834 11L11.1076 0.440765L12.9932 2.32638L5.6529 9.66666H21.6668Z",fill:"#080707"}))},J=function(){return i().createElement("svg",{fill:"none",height:"14",viewBox:"0 0 14 14",width:"14",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{d:"M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z",fill:"#747881"}))},Q=function(e){var t=e.className;return i().createElement("svg",{className:t,fill:"none",height:"18",viewBox:"0 0 18 18",width:"18",xmlns:"http://www.w3.org/2000/svg"},i().createElement("path",{d:"M12.7549 11.255H11.9649L11.6849 10.985C12.6649 9.845 13.2549 8.365 13.2549 6.755C13.2549 3.165 10.3449 0.255005 6.75488 0.255005C3.16488 0.255005 0.254883 3.165 0.254883 6.755C0.254883 10.345 3.16488 13.255 6.75488 13.255C8.36488 13.255 9.84488 12.665 10.9849 11.685L11.2549 11.965V12.755L16.2549 17.745L17.7449 16.255L12.7549 11.255ZM6.75488 11.255C4.26488 11.255 2.25488 9.245 2.25488 6.755C2.25488 4.26501 4.26488 2.255 6.75488 2.255C9.24488 2.255 11.2549 4.26501 11.2549 6.755C11.2549 9.245 9.24488 11.255 6.75488 11.255Z",fill:"#747881"}))},W=function(e){var t=e.disabled,n=e.inputRef,r=e.onSearch,a=e.placeholder,s=e.query,c=(0,d.Ht)("SearchInput").t;return i().createElement("input",{className:"str-chat__channel-search-input","data-testid":"search-input",disabled:t,onChange:r,placeholder:null!=a?a:c("Search"),ref:n,type:"text",value:s})},X=function(e){var t=e.children,n=e.className,r=e.onClick;return i().createElement("button",{className:(0,u.Z)("str-chat__channel-search-bar-button",n),"data-testid":"search-bar-button",onClick:r},t)},Y=function(e){var t=e.activateSearch,n=e.AppMenu,r=e.ClearInputIcon,a=e.exitSearch,c=e.ExitSearchIcon,l=e.inputIsFocused,d=e.MenuIcon,h=e.searchBarRef,m=e.SearchInput,v=void 0===m?W:m,f=e.SearchInputIcon,p=(0,o._T)(e,["activateSearch","AppMenu","ClearInputIcon","exitSearch","ExitSearchIcon","inputIsFocused","MenuIcon","searchBarRef","SearchInput","SearchInputIcon"]),g=(0,s.useState)(!1),x=g[0],E=g[1],_=(0,s.useRef)(null);(0,s.useEffect)(function(){if(_.current){var e=function(e){x&&"Escape"===e.key&&E(!1)},t=function(e){var t;!(!(e.target instanceof HTMLElement)||!x||(null===(t=_.current)||void 0===t?void 0:t.contains(e.target)))&&E(!1)};return document.addEventListener("keydown",e),document.addEventListener("click",t),function(){document.removeEventListener("keydown",e),document.removeEventListener("click",t)}}},[x]),(0,s.useEffect)(function(){if(e.inputRef.current){var n=function(){t()},r=function(e){e.stopPropagation()};return e.inputRef.current.addEventListener("focus",n),e.inputRef.current.addEventListener("blur",r),function(){var t,a;null===(t=e.inputRef.current)||void 0===t||t.removeEventListener("focus",n),null===(a=e.inputRef.current)||void 0===a||a.addEventListener("blur",r)}}},[]);var b=(0,s.useCallback)(function(){var e;a(),null===(e=p.inputRef.current)||void 0===e||e.focus()},[]),C=(0,s.useCallback)(function(){return E(!1)},[]);return i().createElement("div",{className:"str-chat__channel-search-bar","data-testid":"search-bar",ref:h},l?i().createElement(X,{className:"str-chat__channel-search-bar-button--exit-search",onClick:a},i().createElement(void 0===c?$:c,null)):n?i().createElement(X,{className:"str-chat__channel-search-bar-button--menu",onClick:function(){return E(function(e){return!e})}},i().createElement(void 0===d?B:d,null)):null,i().createElement("div",{className:(0,u.Z)("str-chat__channel-search-input--wrapper",p.query&&"str-chat__channel-search-input--wrapper-active")},i().createElement("div",{className:"str-chat__channel-search-input--icon"},i().createElement(void 0===f?Q:f,null)),i().createElement(v,(0,o.pi)({},p)),i().createElement("button",{className:"str-chat__channel-search-input--clear-button","data-testid":"clear-input-button",disabled:!p.query,onClick:b},i().createElement(void 0===r?J:r,null))),x&&n&&i().createElement("div",{ref:_},i().createElement(n,{close:C})))},K=function(){var e=(0,d.Ht)("SearchResults").t;return i().createElement("div",{"aria-live":"polite",className:"str-chat__channel-search-container-empty"},i().createElement(Q,null),e("No results found"))},ee=function(e){var t=e.results,n=(0,d.Ht)("SearchResultsHeader").t;return i().createElement("div",{className:"str-chat__channel-search-results-header","data-testid":"channel-search-results-header"},n("searchResultsCount",{count:t.length}))},et=function(e){var t=e.focusedUser,n=e.results,r=e.SearchResultItem,a=void 0===r?en:r,s=e.selectResult;return i().createElement(i().Fragment,null,n.map(function(e,n){return i().createElement(a,{focusedUser:t,index:n,key:n,result:e,selectResult:s})}))},en=function(e){var t,n,r=e.focusedUser,a=e.index,s=e.result,c=e.selectResult,l=(0,g.mx)().themeVersion,o=(0,u.Z)("str-chat__channel-search-result",r===a&&"str-chat__channel-search-result--focused focused");return z(s)?"2"===l?i().createElement(G,{channel:s,className:o,onSelect:function(){return c(s)}}):i().createElement("button",{"aria-label":"Select Channel: ".concat((null===(t=s.data)||void 0===t?void 0:t.name)||""),className:o,"data-testid":"channel-search-result-channel",onClick:function(){return c(s)},role:"option"},i().createElement("div",{className:"result-hashtag"},"#"),i().createElement("p",{className:"channel-search__result-text"},null===(n=s.data)||void 0===n?void 0:n.name)):i().createElement("button",{"aria-label":"Select User Channel: ".concat(s.name||""),className:o,"data-testid":"channel-search-result-user",onClick:function(){return c(s)},role:"option"},i().createElement(A.q,{image:s.image,name:s.name||s.id,size:"2"===l?40:void 0,user:s}),i().createElement("div",{className:"str-chat__channel-search-result--display-name"},s.name||s.id))},er=function(e){var t=e.children,n=e.popupResults;return i().createElement("div",{"aria-label":"Channel search results",className:(0,u.Z)("str-chat__channel-search-container str-chat__channel-search-result-list",n?"popup":"inline")},t)},ea=function(e){var t=e.popupResults,n=e.results,r=e.searching,a=e.SearchEmpty,c=e.SearchResultsHeader,l=e.SearchLoading,o=e.SearchResultItem,u=e.SearchResultsList,h=e.selectResult,m=(0,d.Ht)("SearchResults").t,v=(0,s.useState)(),f=v[0],p=v[1],g=(0,s.useCallback)(function(e){if("ArrowUp"===e.key&&p(function(e){return void 0===e?0:0===e?n.length-1:e-1}),"ArrowDown"===e.key&&p(function(e){return void 0===e?0:e===n.length-1?0:e+1}),"Enter"===e.key&&(e.preventDefault(),void 0!==f))return h(n[f]),p(void 0)},[f]);return((0,s.useEffect)(function(){return document.addEventListener("keydown",g,!1),function(){return document.removeEventListener("keydown",g)}},[g]),r)?i().createElement(er,{popupResults:t},l?i().createElement(l,null):i().createElement("div",{className:"str-chat__channel-search-container-searching","data-testid":"search-in-progress-indicator"},m("Searching..."))):n.length?i().createElement(er,{popupResults:t},i().createElement(void 0===c?ee:c,{results:n}),i().createElement(void 0===u?et:u,{focusedUser:f,results:n,SearchResultItem:void 0===o?en:o,selectResult:h})):i().createElement(er,{popupResults:t},i().createElement(void 0===a?K:a,null))},es=i().memo(function(e){var t=e.AppMenu,n=e.ClearInputIcon,r=e.ExitSearchIcon,a=e.MenuIcon,s=e.placeholder,c=e.popupResults,l=void 0!==c&&c,d=e.SearchBar,h=e.SearchEmpty,m=e.SearchInput,v=void 0===m?W:m,f=e.SearchLoading,p=e.SearchInputIcon,x=e.SearchResultItem,E=e.SearchResultsList,_=e.SearchResultsHeader,b=(0,o._T)(e,["AppMenu","ClearInputIcon","ExitSearchIcon","MenuIcon","placeholder","popupResults","SearchBar","SearchEmpty","SearchInput","SearchLoading","SearchInputIcon","SearchResultItem","SearchResultsList","SearchResultsHeader"]),C=(0,g.mx)("ChannelSearch").themeVersion,w=V(b),y=w.activateSearch,S=w.clearState,L=w.exitSearch,N=w.inputIsFocused,R=w.inputRef,I=w.onSearch,k=w.query,j=w.results,M=w.searchBarRef,P=w.searching,q=w.selectResult;return i().createElement("div",{className:(0,u.Z)("str-chat__channel-search",l?"str-chat__channel-search--popup":"str-chat__channel-search--inline",{"str-chat__channel-search--with-results":j.length>0}),"data-testid":"channel-search"},"2"===C?i().createElement(void 0===d?Y:d,{activateSearch:y,AppMenu:t,ClearInputIcon:n,clearState:S,disabled:b.disabled,exitSearch:L,ExitSearchIcon:r,inputIsFocused:N,inputRef:R,MenuIcon:a,onSearch:I,placeholder:s,query:k,searchBarRef:M,SearchInput:v,SearchInputIcon:p}):i().createElement(v,{clearState:S,disabled:b.disabled,inputRef:R,onSearch:I,placeholder:s,query:k}),k&&i().createElement(ea,{popupResults:l,results:j,SearchEmpty:h,searching:P,SearchLoading:f,SearchResultItem:x,SearchResultsHeader:_,SearchResultsList:E,selectResult:q}))}),ei=n(64475),ec=n(82179),el=n(72559),eo=i().memo(function(e){var t=e.children,n=e.isLoading,r=e.onClick,a=e.refreshing,c=(0,d.Ht)("UnMemoizedLoadMoreButton").t,l=null!=t?t:c("Load more"),o=void 0!==n?n:a;return(0,s.useEffect)(function(){(0,el.b)([[{refreshing:a},{isLoading:n}]],"LoadMoreButton")},[]),i().createElement("div",{className:"str-chat__load-more-button"},i().createElement("button",{"aria-label":"Load More Channels",className:"str-chat__load-more-button__button str-chat__cta-button","data-testid":"load-more-button",disabled:o,onClick:r},o?i().createElement(ec.T,null):l))}),eu=i().memo(function(e){var t=e.children,n=e.hasNextPage,r=e.isLoading,a=e.LoadMoreButton,c=e.loadNextPage,l=e.refreshing,o=e.reverse,u=void 0!==r?r:l;return(0,s.useEffect)(function(){(0,el.b)([[{refreshing:l},{isLoading:r}]],"LoadMorePaginator")},[]),i().createElement(i().Fragment,null,!o&&t,n&&i().createElement(void 0===a?eo:a,{isLoading:u,onClick:c}),o&&t)}),ed=(0,s.createContext)(void 0),eh=function(e){var t=e.children,n=e.value;return i().createElement(ed.Provider,{value:n},t)},em={},ev={},ef={},ep=i().memo(function(e){var t,n,r=e.additionalChannelSearchProps,a=e.Avatar,c=void 0===a?A.q:a,l=e.allowNewMessagesFromUnfilteredChannels,d=e.channelRenderFilterFn,h=e.ChannelSearch,v=e.customActiveChannel,C=e.EmptyStateIndicator,w=void 0===C?ei.D:C,y=e.filters,H=e.LoadingErrorIndicator,D=e.LoadingIndicator,F=e.List,U=e.lockChannelOrder,T=e.onAddedToChannel,O=e.onChannelDeleted,Z=e.onChannelHidden,z=e.onChannelTruncated,V=e.onChannelUpdated,B=e.onChannelVisible,$=e.onMessageNew,J=e.onRemovedFromChannel,Q=e.options,W=e.Paginator,X=e.Preview,Y=e.recoveryThrottleIntervalMs,K=e.renderChannels,ee=e.sendChannelsToList,et=e.setActiveChannelOnMount,en=void 0===et||et,er=e.showChannelSearch,ea=e.sort,ec=e.watchers,el=void 0===ec?{}:ec,eo=(0,g.mx)("ChannelList"),ed=eo.channel,ep=eo.channelsQueryState,eg=eo.client,ex=eo.closeMobileNav,eE=eo.customClasses,e_=eo.navOpen,eb=void 0!==e_&&e_,eC=eo.setActiveChannel,ew=eo.theme,ey=eo.useImageFlagEmojisOnWindows,eS=(0,s.useRef)(null),eL=(0,s.useState)(0),eN=eL[0],eR=eL[1],eI=(0,s.useState)(!1),ek=eI[0],ej=eI[1],eM=function(){return eR(function(e){return e+1})},eP=(0,s.useCallback)(function(e){var t;e.target.value?ej(!0):ej(!1),null===(t=null==r?void 0:r.onSearch)||void 0===t||t.call(r,e)},[]),eq=(0,s.useCallback)(function(){var e;ej(!1),null===(e=null==r?void 0:r.onSearchExit)||void 0===e||e.call(r)},[]),eA=P(eg,y||em,(void 0===ea?ef:ea)||ef,Q||ev,function(e,t){return(0,o.mG)(void 0,void 0,void 0,function(){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:if(!e.length||e.length>((null==Q?void 0:Q.limit)||30))return[2];if(!v)return[3,3];if(n=e.find(function(e){return e.id===v}))return[3,2];return[4,eg.queryChannels({id:v})];case 1:n=r.sent()[0],r.label=2;case 2:return n&&(eC(n,el),t(N({activeChannel:n,channels:e,cid:n.cid}))),[2];case 3:return en&&eC(e[0],el),[2]}})})},Y),eH=eA.channels,eD=eA.hasNextPage,eF=eA.loadNextPage,eU=eA.setChannels,eT=d?d(eH):eH;I(eS,eb,ex),R(eU,U,l),j(eU,$,l),k(eU,T,l),M(eU,J),x(eU,O),E(eU,Z),S(eU,B),_(eU,z,eM),b(eU,V,eM),L(eM),q(eU),(0,s.useEffect)(function(){var e=function(e){e.cid===(null==ed?void 0:ed.cid)&&eC()};return eg.on("channel.deleted",e),eg.on("channel.hidden",e),function(){eg.off("channel.deleted",e),eg.off("channel.hidden",e)}},[null==ed?void 0:ed.cid]);var eG=function(e){var t={activeChannel:ed,Avatar:c,channel:e,channelUpdateCount:eN,key:e.id,Preview:X,setActiveChannel:eC,watchers:el};return i().createElement(G,(0,o.pi)({},t))},eO=(0,u.Z)(null!==(t=null==eE?void 0:eE.chat)&&void 0!==t?t:"str-chat",ew,null!==(n=null==eE?void 0:eE.channelList)&&void 0!==n?n:"str-chat-channel-list str-chat__channel-list str-chat__channel-list-react",{"str-chat--windows-flags":ey&&navigator.userAgent.match(/Win/),"str-chat-channel-list--open":eb}),eZ=!ek||(null==r?void 0:r.popupResults);return i().createElement(eh,{value:{channels:eH,setChannels:eU}},i().createElement("div",{className:eO,ref:eS},void 0!==er&&er&&i().createElement(void 0===h?es:h,(0,o.pi)({onSearch:eP,onSearchExit:eq,setChannels:eU},r)),eZ&&i().createElement(void 0===F?p:F,{error:ep.error,loadedChannels:void 0!==ee&&ee?eT:void 0,loading:!!ep.queryInProgress&&["reload","uninitialized"].includes(ep.queryInProgress),LoadingErrorIndicator:void 0===H?m:H,LoadingIndicator:void 0===D?f:D,setChannels:eU},(null==eT?void 0:eT.length)?i().createElement(void 0===W?eu:W,{hasNextPage:eD,isLoading:"load-more"===ep.queryInProgress,loadNextPage:eF},K?K(eT,eG):eT.map(function(e){return eG(e)})):i().createElement(w,{listType:"channel"}))))}),eg=n(35820),Window=n(83353),ex=function(e){var t=e.title,n=(0,d.Ht)("MenuIcon").t;return i().createElement("svg",{"data-testid":"menu-icon",viewBox:"0 0 448 512",xmlns:"http://www.w3.org/2000/svg"},i().createElement("title",null,null!=t?t:n("Menu")),i().createElement("path",{d:"M0 88C0 74.75 10.75 64 24 64H424C437.3 64 448 74.75 448 88C448 101.3 437.3 112 424 112H24C10.75 112 0 101.3 0 88zM0 248C0 234.7 10.75 224 24 224H424C437.3 224 448 234.7 448 248C448 261.3 437.3 272 424 272H24C10.75 272 0 261.3 0 248zM424 432H24C10.75 432 0 421.3 0 408C0 394.7 10.75 384 24 384H424C437.3 384 448 394.7 448 408C448 421.3 437.3 432 424 432z",fill:"currentColor"}))},eE=n(60060),e_=i().memo(function(e){var t=e.Avatar,n=void 0===t?A.q:t,r=e.MenuIcon,a=e.image,s=e.live,c=e.title,l=(0,eE.JN)("ChannelHeader"),o=l.channel,u=l.watcher_count,h=(0,g.mx)("ChannelHeader").openMobileNav,m=(0,d.Ht)("ChannelHeader").t,v=(0,F.y)({channel:o,overrideImage:a,overrideTitle:c}),f=v.displayImage,p=v.displayTitle,x=(null==o?void 0:o.data)||{},E=x.member_count,_=x.subtitle;return i().createElement("div",{className:"str-chat__header-livestream str-chat__channel-header"},i().createElement("button",{"aria-label":"Menu",className:"str-chat__header-hamburger",onClick:h},i().createElement(void 0===r?ex:r,null)),i().createElement(n,{image:f,name:p,shape:"rounded",size:(null==o?void 0:o.type)==="commerce"?60:40}),i().createElement("div",{className:"str-chat__header-livestream-left str-chat__channel-header-end"},i().createElement("p",{className:"str-chat__header-livestream-left--title str-chat__channel-header-title"},p," ",s&&i().createElement("span",{className:"str-chat__header-livestream-left--livelabel"},m("live"))),_&&i().createElement("p",{className:"str-chat__header-livestream-left--subtitle"},_),i().createElement("p",{className:"str-chat__header-livestream-left--members str-chat__channel-header-info"},!s&&!!E&&E>0&&i().createElement(i().Fragment,null,m("{{ memberCount }} members",{memberCount:E}),","," "),m("{{ watcherCount }} online",{watcherCount:u}))))}),eb=n(46643),eC=n(61186),ew=n(82083),ey=n(96094);function eS(){let{user:e}=(0,c.useAuth)(),[t,n]=(0,s.useState)(null),[r,i]=(0,s.useState)(!0),[o,u]=(0,s.useState)(null);return((0,s.useEffect)(()=>{if(!e)return;let r=async()=>{try{i(!0),u(null);let t="dz5f4d5kzrue";if(!t)throw Error("Stream API key is missing");let r=ey.c8.getInstance(t);await r.connectUser({id:e.id,name:e.email?.split("@")[0]||e.id,image:`https://getstream.io/random_svg/?id=${e.id}&name=${e.email?.split("@")[0]||e.id}`},r.devToken(e.id));let a=r.channel("messaging","general",{name:"General",image:"https://getstream.io/random_svg/?id=general&name=General"}),s=r.channel("messaging","deals",{name:"Deal Discussions",image:"https://getstream.io/random_svg/?id=deals&name=Deals"}),c=r.channel("messaging","marketing",{name:"Marketing & Growth",image:"https://getstream.io/random_svg/?id=marketing&name=Marketing"}),l=r.channel("messaging","questions",{name:"Q&A",image:"https://getstream.io/random_svg/?id=questions&name=Questions"});await Promise.all([a.create(),s.create(),c.create(),l.create()]),n(r)}catch(e){console.error("Error initializing chat:",e),u("Failed to initialize chat. Please try again later.")}finally{i(!1)}};return r(),()=>{t&&t.disconnectUser()}},[e]),e)?r?a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:a.jsx("div",{className:"flex justify-center my-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})}):o||!t?(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-6",children:o||"Failed to initialize chat"}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary inline-block",children:"Try Again"})})]}):a.jsx("div",{className:"h-[calc(100vh-4rem)]",children:a.jsx("div",{className:"flex h-full",children:a.jsx(l.e,{client:t,theme:"messaging light",children:(0,a.jsxs)("div",{className:"flex h-full w-full",children:[(0,a.jsxs)("div",{className:"w-1/4 h-full bg-white border-r border-gray-200",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[a.jsx("h2",{className:"text-lg font-bold",children:"Section 8 Community"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Connect with other investors"})]}),a.jsx(ep,{filters:{type:"messaging",members:{$in:[e.id]}},sort:{last_message_at:-1},options:{state:!0,watch:!0}})]}),a.jsx("div",{className:"w-3/4 h-full flex flex-col",children:(0,a.jsxs)(eg.$,{children:[(0,a.jsxs)(Window.R,{children:[a.jsx(e_,{}),a.jsx(eb.r,{}),a.jsx(eC.R,{})]}),a.jsx(ew.j,{})]})})]})})})}):a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:a.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-8",children:(0,a.jsxs)("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-700",children:["Please sign in to access the community chat."," ",a.jsx("a",{href:"/login",className:"font-medium underline text-yellow-700 hover:text-yellow-600",children:"Sign in here"})]})})]})})})}n(36227)},554:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AuthProvider:()=>c,useAuth:()=>l});var r=n(53854),a=n(34218),s=n(62024);let i=(0,a.createContext)(void 0);function c({children:e}){let[t,n]=(0,a.useState)(null),[c,l]=(0,a.useState)(null),[o,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let{data:{subscription:e}}=s.O.auth.onAuthStateChange((e,t)=>{l(t),n(t?.user??null),u(!1)});return s.O.auth.getSession().then(({data:{session:e}})=>{l(e),n(e?.user??null),u(!1)}),()=>{e.unsubscribe()}},[]);let d=async(e,t)=>{try{let{error:n}=await s.O.auth.signInWithPassword({email:e,password:t});if(n)throw n}catch(e){throw console.error("Error signing in:",e),e}},h=async(e,t)=>{try{let{error:n}=await s.O.auth.signUp({email:e,password:t});if(n)throw n}catch(e){throw console.error("Error signing up:",e),e}},m=async()=>{try{let{error:e}=await s.O.auth.signOut();if(e)throw e}catch(e){throw console.error("Error signing out:",e),e}};return r.jsx(i.Provider,{value:{user:t,session:c,isLoading:o,signIn:d,signUp:h,signOut:m},children:e})}function l(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},62024:(e,t,n)=>{"use strict";n.d(t,{O:()=>i});var r=n(83045);let a="https://mock-supabase-url.supabase.co",s="mock-anon-key-for-demo-purposes-only";if(!a||!s)throw Error("Missing Supabase environment variables. Please check your .env.local file.");let i=(0,r.eI)(a,s)},65005:(e,t,n)=>{"use strict";n.r(t),n.d(t,{$$typeof:()=>i,__esModule:()=>s,default:()=>l});var r=n(95153);let a=(0,r.createProxy)(String.raw`/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/chat/page.tsx`),{__esModule:s,$$typeof:i}=a,c=a.default,l=c},447:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f,metadata:()=>v});var r=n(4656);n(54315);var a=n(31193),s=n.n(a),i=n(24353),c=n.n(i);function l(){return r.jsx("footer",{className:"bg-gray-800 text-white",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Section 8 Real Estate"}),r.jsx("p",{className:"text-gray-300",children:"Find, analyze, and invest in Section 8 properties with confidence."})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Quick Links"}),(0,r.jsxs)("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx(c(),{href:"/properties",className:"text-gray-300 hover:text-white",children:"Properties"})}),r.jsx("li",{children:r.jsx(c(),{href:"/chat",className:"text-gray-300 hover:text-white",children:"Community"})}),r.jsx("li",{children:r.jsx(c(),{href:"/coaching",className:"text-gray-300 hover:text-white",children:"Coaching"})})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Account"}),(0,r.jsxs)("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx(c(),{href:"/login",className:"text-gray-300 hover:text-white",children:"Sign In"})}),r.jsx("li",{children:r.jsx(c(),{href:"/register",className:"text-gray-300 hover:text-white",children:"Register"})}),r.jsx("li",{children:r.jsx(c(),{href:"/favorites",className:"text-gray-300 hover:text-white",children:"Saved Properties"})})]})]})]}),r.jsx("div",{className:"mt-8 border-t border-gray-700 pt-8 text-center text-gray-300",children:(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Section 8 Real Estate. All rights reserved."]})})]})})}var o=n(95153);let u=(0,o.createProxy)(String.raw`/Users/spencerpro/Documents/GitHub/realestatemvp/src/context/AuthContext.tsx`),{__esModule:d,$$typeof:h}=u;u.default;let m=(0,o.createProxy)(String.raw`/Users/spencerpro/Documents/GitHub/realestatemvp/src/context/AuthContext.tsx#AuthProvider`);(0,o.createProxy)(String.raw`/Users/spencerpro/Documents/GitHub/realestatemvp/src/context/AuthContext.tsx#useAuth`);let v={title:"Real Estate MVP",description:"Section 8 Real Estate Analysis Platform"};function f({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:"flex flex-col min-h-screen",children:(0,r.jsxs)(m,{children:[r.jsx(s(),{}),r.jsx("main",{className:"flex-grow",children:e}),r.jsx(l,{})]})})})}},31193:()=>{throw Error("Module build failed (from ./node_modules/next/dist/build/webpack/loaders/next-swc-loader.js):\nError: \n  \x1b[38;2;255;30;30m\xd7\x1b[0m NEXT_RSC_ERR_REACT_API: useState\n   ╭─[\x1b[38;2;92;157;255;1;4m/Users/spencerpro/Documents/GitHub/realestatemvp/src/components/Header.tsx\x1b[0m:1:1]\n \x1b[2m1\x1b[0m │ import Link from 'next/link';\n \x1b[2m2\x1b[0m │ import { useState } from 'react';\n   \xb7 \x1b[38;2;246;87;248m         ────────\x1b[0m\n \x1b[2m3\x1b[0m │ \n \x1b[2m4\x1b[0m │ export default function Header() {\n \x1b[2m5\x1b[0m │   const [isMenuOpen, setIsMenuOpen] = useState(false);\n   ╰────\n")},54315:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[271,825,294,417,94,600],()=>n(47193));module.exports=r})();
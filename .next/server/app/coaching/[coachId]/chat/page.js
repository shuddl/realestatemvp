(()=>{var e={};e.id=637,e.ids=[637],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},41766:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>o});var s=r(67096),i=r(16132),a=r(37284),n=r.n(a),l=r(32564),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);r.d(t,c);let o=["",{children:["coaching",{children:["[coachId]",{children:["chat",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,78439)),"/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/coaching/[coachId]/chat/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,65246)),"/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/coaching/[coachId]/chat/page.tsx"],u="/coaching/[coachId]/chat/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/coaching/[coachId]/chat/page",pathname:"/coaching/[coachId]/chat",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3905:(e,t,r)=>{Promise.resolve().then(r.bind(r,62165))},51018:(e,t,r)=>{"use strict";e.exports=r(27804)},62165:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(53854),i=r(34218),a=r(51018),n=r(554),l=r(21812),c=r(35820),o=r(83353),d=r(46643),u=r(61186),p=r(82083),x=r(96094);r(36227);let m=[{id:"coach-1",name:"Sarah Johnson",title:"Section 8 Investment Specialist",image:"https://randomuser.me/api/portraits/women/23.jpg"},{id:"coach-2",name:"Michael Rodriguez",title:"Property Management Expert",image:"https://randomuser.me/api/portraits/men/45.jpg"},{id:"coach-3",name:"Jennifer Lee",title:"Market Analysis Strategist",image:"https://randomuser.me/api/portraits/women/32.jpg"}];function h(){let{coachId:e}=(0,a.useParams)(),t=(0,a.useRouter)(),{user:r}=(0,n.a)(),[h,g]=(0,i.useState)(null),[v,f]=(0,i.useState)(null),[j,b]=(0,i.useState)(null),[y,w]=(0,i.useState)(!0),[N,q]=(0,i.useState)(null);return((0,i.useEffect)(()=>{let t=m.find(t=>t.id===e);if(!t){q("Coach not found"),w(!1);return}if(g(t),!r)return;let s=async()=>{try{w(!0),q(null);let e="dz5f4d5kzrue";if(!e)throw Error("Stream API key is missing");let s=x.c8.getInstance(e);await s.connectUser({id:r.id,name:r.email?.split("@")[0]||r.id,image:`https://getstream.io/random_svg/?id=${r.id}&name=${r.email?.split("@")[0]||r.id}`},s.devToken(r.id));let i=`private-coaching-${r.id}-${t.id}`,a=s.channel("messaging",i,{name:`Private Coaching with ${t.name}`,image:t.image,members:[r.id,t.id]});await a.create(),f(s),b(a)}catch(e){console.error("Error initializing private coaching chat:",e),q("Failed to initialize chat. Please try again later.")}finally{w(!1)}};return s(),()=>{v&&v.disconnectUser()}},[e,r]),r)?y?s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:s.jsx("div",{className:"flex justify-center my-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})}):!N&&v&&j&&h?s.jsx("div",{className:"h-[calc(100vh-4rem)]",children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 py-4 px-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("button",{onClick:()=>t.push("/coaching"),className:"mr-4 text-gray-500 hover:text-gray-700",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden mr-3",children:s.jsx("img",{src:h.image,alt:h.name,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-lg font-bold",children:h.name}),s.jsx("p",{className:"text-sm text-gray-500",children:h.title})]})]})]}),s.jsx("a",{href:"https://calendly.com",target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary text-sm",children:"Schedule Session"})]})}),s.jsx("div",{className:"flex-grow",children:s.jsx(l.e,{client:v,theme:"messaging light",children:(0,s.jsxs)(c.$,{channel:j,children:[(0,s.jsxs)(o.R,{hideOnThread:!0,children:[s.jsx(d.r,{}),s.jsx(u.R,{focus:!0})]}),s.jsx(p.j,{})]})})})]})}):(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-6",children:N||"Failed to initialize chat"}),s.jsx("div",{className:"text-center",children:s.jsx("button",{onClick:()=>t.push("/coaching"),className:"btn btn-primary inline-block",children:"Back to Coaching"})})]}):s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-8",children:(0,s.jsxs)("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:(0,s.jsxs)("p",{className:"text-sm text-yellow-700",children:["Please sign in to access coaching chat."," ",s.jsx("a",{href:"/login",className:"font-medium underline text-yellow-700 hover:text-yellow-600",children:"Sign in here"})]})})]})})})}},78439:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>c});var s=r(95153);let i=(0,s.createProxy)(String.raw`/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/coaching/[coachId]/chat/page.tsx`),{__esModule:a,$$typeof:n}=i,l=i.default,c=l}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[271,391,294,417,94,600,496],()=>r(41766));module.exports=s})();
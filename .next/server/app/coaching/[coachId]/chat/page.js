(()=>{var e={};e.id=637,e.ids=[637],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},1766:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>l});var s=r(6586),a=r(9685),i=r(5424),n=r.n(i),c=r(6052),o={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>c[e]);r.d(t,o);let l=["",{children:["coaching",{children:["[coachId]",{children:["chat",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8439)),"/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/coaching/[coachId]/chat/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5246)),"/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9145,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/coaching/[coachId]/chat/page.tsx"],m="/coaching/[coachId]/chat/page",u={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/coaching/[coachId]/chat/page",pathname:"/coaching/[coachId]/chat",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},3905:(e,t,r)=>{Promise.resolve().then(r.bind(r,2165))},2165:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(3854),a=r(4218),i=r(1018),n=r(554);(function(){var e=Error("Cannot find module 'stream-chat-react'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module 'stream-chat'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'stream-chat-react/dist/css/index.css'");throw e.code="MODULE_NOT_FOUND",e}();let c=[{id:"coach-1",name:"Sarah Johnson",title:"Section 8 Investment Specialist",image:"https://randomuser.me/api/portraits/women/23.jpg"},{id:"coach-2",name:"Michael Rodriguez",title:"Property Management Expert",image:"https://randomuser.me/api/portraits/men/45.jpg"},{id:"coach-3",name:"Jennifer Lee",title:"Market Analysis Strategist",image:"https://randomuser.me/api/portraits/women/32.jpg"}];function o(){let{coachId:e}=(0,i.useParams)(),t=(0,i.useRouter)(),{user:r}=(0,n.a)(),[o,l]=(0,a.useState)(null),[d,m]=(0,a.useState)(null),[u,h]=(0,a.useState)(null),[p,x]=(0,a.useState)(!0),[g,f]=(0,a.useState)(null);return((0,a.useEffect)(()=>{let t=c.find(t=>t.id===e);if(!t){f("Coach not found"),x(!1);return}if(l(t),!r)return;let s=async()=>{try{x(!0),f(null);let e=process.env.NEXT_PUBLIC_STREAM_API_KEY;if(!e)throw Error("Stream API key is missing");let s=Object(function(){var e=Error("Cannot find module 'stream-chat'");throw e.code="MODULE_NOT_FOUND",e}()).getInstance(e);await s.connectUser({id:r.id,name:r.email?.split("@")[0]||r.id,image:`https://getstream.io/random_svg/?id=${r.id}&name=${r.email?.split("@")[0]||r.id}`},s.devToken(r.id));let a=`private-coaching-${r.id}-${t.id}`,i=s.channel("messaging",a,{name:`Private Coaching with ${t.name}`,image:t.image,members:[r.id,t.id]});await i.create(),m(s),h(i)}catch(e){console.error("Error initializing private coaching chat:",e),f("Failed to initialize chat. Please try again later.")}finally{x(!1)}};return s(),()=>{d&&d.disconnectUser()}},[e,r]),r)?p?s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:s.jsx("div",{className:"flex justify-center my-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})}):!g&&d&&u&&o?s.jsx("div",{className:"h-[calc(100vh-4rem)]",children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 py-4 px-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("button",{onClick:()=>t.push("/coaching"),className:"mr-4 text-gray-500 hover:text-gray-700",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden mr-3",children:s.jsx("img",{src:o.image,alt:o.name,className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-lg font-bold",children:o.name}),s.jsx("p",{className:"text-sm text-gray-500",children:o.title})]})]})]}),s.jsx("a",{href:"https://calendly.com",target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary text-sm",children:"Schedule Session"})]})}),s.jsx("div",{className:"flex-grow",children:s.jsx(Object(function(){var e=Error("Cannot find module 'stream-chat-react'");throw e.code="MODULE_NOT_FOUND",e}()),{client:d,theme:"messaging light",children:(0,s.jsxs)(Object(function(){var e=Error("Cannot find module 'stream-chat-react'");throw e.code="MODULE_NOT_FOUND",e}()),{channel:u,children:[(0,s.jsxs)(Object(function(){var e=Error("Cannot find module 'stream-chat-react'");throw e.code="MODULE_NOT_FOUND",e}()),{hideOnThread:!0,children:[s.jsx(Object(function(){var e=Error("Cannot find module 'stream-chat-react'");throw e.code="MODULE_NOT_FOUND",e}()),{}),s.jsx(Object(function(){var e=Error("Cannot find module 'stream-chat-react'");throw e.code="MODULE_NOT_FOUND",e}()),{focus:!0})]}),s.jsx(Object(function(){var e=Error("Cannot find module 'stream-chat-react'");throw e.code="MODULE_NOT_FOUND",e}()),{})]})})})]})}):(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-6",children:g||"Failed to initialize chat"}),s.jsx("div",{className:"text-center",children:s.jsx("button",{onClick:()=>t.push("/coaching"),className:"btn btn-primary inline-block",children:"Back to Coaching"})})]}):s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-8",children:(0,s.jsxs)("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:(0,s.jsxs)("p",{className:"text-sm text-yellow-700",children:["Please sign in to access coaching chat."," ",s.jsx("a",{href:"/login",className:"font-medium underline text-yellow-700 hover:text-yellow-600",children:"Sign in here"})]})})]})})})}},8439:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var s=r(8641);let a=(0,s.D)(String.raw`/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/coaching/[coachId]/chat/page.tsx`),{__esModule:i,$$typeof:n}=a,c=a.default,o=c}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[584,894,882],()=>r(1766));module.exports=s})();
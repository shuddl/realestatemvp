(()=>{var e={};e.id=562,e.ids=[562],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},16933:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=t(67096),a=t(16132),i=t(37284),l=t.n(i),n=t(32564),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let d=["",{children:["properties",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,33728)),"/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/properties/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,65246)),"/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/properties/[id]/page.tsx"],p="/properties/[id]/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/properties/[id]/page",pathname:"/properties/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},90255:(e,s,t)=>{Promise.resolve().then(t.bind(t,69511))},51018:(e,s,t)=>{"use strict";e.exports=t(27804)},69511:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var r=t(53854),a=t(34218),i=t(51018),l=t(41956),n=t.n(l),o=t(554),d=t(62024),c=t(68504),p=t(77294);let m=process.env.SIMPLYRETS_API_KEY,x=process.env.SIMPLYRETS_API_SECRET;async function u(e){try{var s;let{data:t,error:r}=await d.O.from("properties").select("*").eq("mls_id",e).single();if(r&&"PGRST116"!==r.code)throw console.error("Error fetching property from Supabase:",r),r;if(t)return t;let a=await p.Z.get(`https://api.simplyrets.com/properties/${e}`,{auth:{username:m,password:x}}),i={id:(s=a.data).mlsId,mls_id:s.mlsId,address:s.address.full,city:s.address.city,state:s.address.state,zip:s.address.postalCode,price:s.listPrice,beds:s.property.bedrooms,baths:s.property.bathsFull+(s.property.bathsHalf?.5*s.property.bathsHalf:0),sqft:s.property.area,lot_size:s.property.lotSize,year_built:s.property.yearBuilt,property_type:s.property.type,description:s.remarks,photos_json:s.photos?s.photos.map(e=>e.url):[],source_url:`/properties/${s.mlsId}`,status:s.mls.status,geo_location:s.geo?{lat:s.geo.lat,lng:s.geo.lng}:void 0,last_updated:new Date().toISOString()};return await d.O.from("properties").upsert(i,{onConflict:"mls_id"}),i}catch(s){return console.error(`Error fetching property ${e}:`,s),null}}function h(){let{id:e}=(0,i.useParams)(),{user:s}=(0,o.a)(),[t,l]=(0,a.useState)(null),[p,m]=(0,a.useState)(!0),[x,h]=(0,a.useState)(null),[g,f]=(0,a.useState)(!1),[j,b]=(0,a.useState)(!1),[y,v]=(0,a.useState)(0),[N,_]=(0,a.useState)(20),[w,q]=(0,a.useState)(7),[P,S]=(0,a.useState)(30),[k,M]=(0,a.useState)(null),[I,E]=(0,a.useState)(null);(0,a.useEffect)(()=>{let t=async()=>{m(!0),h(null);try{let t=await u(e);if(!t){h("Property not found"),m(!1);return}let{data:r}=await d.O.from("fmr_data").select("*").eq("zip_code",t.zip).order("year",{ascending:!1}).limit(1),a=null;if(r&&r.length>0)switch(t.beds){case 0:a=r[0].beds_0;break;case 1:a=r[0].beds_1;break;case 2:a=r[0].beds_2;break;case 3:a=r[0].beds_3;break;default:a=r[0].beds_4}let i=t.price,n=.07/12,o=Math.round(.8*i*n*Math.pow(1+n,360)/(Math.pow(1+n,360)-1)+.02*i/12),c=null!==a?a-o:null,p={...t,fair_market_rent:a,estimated_mortgage:o,estimated_cash_flow:c};if(l(p),M(o),E(c),s){let{data:e}=await d.O.from("favorite_properties").select("id").eq("user_id",s.id).eq("property_id",t.id).limit(1);f(!!e&&e.length>0)}}catch(e){console.error("Error fetching property details:",e),h("Failed to fetch property details. Please try again later.")}finally{m(!1)}};e&&t()},[e,s]),(0,a.useEffect)(()=>{if(t){let e=t.price,s=N/100,r=w/100,a=12*P,i=r/12,l=Math.round(e*(1-s)*i*Math.pow(1+i,a)/(Math.pow(1+i,a)-1)+.02*e/12);M(l);let n=null!==t.fair_market_rent?t.fair_market_rent-l:null;E(n)}},[t,N,w,P]);let C=async()=>{if(!s){window.location.href=`/login?redirectUrl=/properties/${e}`;return}if(t){b(!0);try{if(g){let{error:e}=await d.O.from("favorite_properties").delete().eq("user_id",s.id).eq("property_id",t.id);if(e)throw e}else{let{error:e}=await d.O.from("favorite_properties").insert({user_id:s.id,property_id:t.id});if(e)throw e}f(!g)}catch(e){console.error("Error toggling favorite status:",e)}finally{b(!1)}}};if(p)return r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:r.jsx("div",{className:"flex justify-center my-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})});if(x||!t)return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-6",children:x||"Property not found"}),r.jsx("div",{className:"text-center",children:r.jsx("a",{href:"/properties",className:"btn btn-primary inline-block",children:"Back to Properties"})})]});let D=I&&I>0?"positive":I&&I<0?"negative":"neutral";return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx("div",{className:"mb-8",children:(0,r.jsxs)("a",{href:"/properties",className:"text-primary hover:text-primary/80 flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to properties"]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"relative h-96 w-full rounded-lg overflow-hidden mb-4",children:[t.photos_json&&t.photos_json.length>0?r.jsx(n(),{src:t.photos_json[y],alt:`${t.address} - Image ${y+1}`,fill:!0,className:"object-cover"}):r.jsx("div",{className:"h-full w-full flex items-center justify-center bg-gray-200",children:r.jsx("span",{className:"text-gray-400",children:"No image available"})}),r.jsx("button",{onClick:C,disabled:j,className:"absolute top-4 right-4 p-2 bg-white rounded-full shadow-md hover:bg-gray-100 focus:outline-none z-10","aria-label":g?"Remove from favorites":"Add to favorites",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:g?"currentColor":"none",stroke:"currentColor",className:`w-6 h-6 ${g?"text-red-500":"text-gray-400"}`,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),t.photos_json&&t.photos_json.length>1&&r.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:t.photos_json.map((e,s)=>r.jsx("button",{onClick:()=>v(s),className:`flex-shrink-0 relative h-20 w-20 rounded-md overflow-hidden ${y===s?"ring-2 ring-primary":""}`,children:r.jsx(n(),{src:e,alt:`${t.address} - Thumbnail ${s+1}`,fill:!0,className:"object-cover"})},s))})]}),(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:t.address}),(0,r.jsxs)("p",{className:"text-xl text-gray-700 mb-4",children:[t.city,", ",t.state," ",t.zip]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("p",{className:"text-3xl font-bold text-primary",children:(0,c.xG)(t.price)}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-500 text-sm",children:"Beds"}),r.jsx("p",{className:"font-semibold",children:t.beds})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-500 text-sm",children:"Baths"}),r.jsx("p",{className:"font-semibold",children:t.baths})]}),t.sqft&&(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-500 text-sm",children:"Sq Ft"}),r.jsx("p",{className:"font-semibold",children:(0,c.uf)(t.sqft)})]}),t.year_built&&(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-500 text-sm",children:"Year"}),r.jsx("p",{className:"font-semibold",children:t.year_built})]})]})]})]}),t.description&&(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Description"}),r.jsx("div",{className:"prose max-w-none",children:r.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:t.description})})]}),(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Property Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-gray-500 text-sm",children:"Property Type"}),r.jsx("p",{className:"font-medium",children:t.property_type||"Not specified"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-gray-500 text-sm",children:"Status"}),r.jsx("p",{className:"font-medium capitalize",children:t.status||"Active"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-gray-500 text-sm",children:"MLS ID"}),r.jsx("p",{className:"font-medium",children:t.mls_id||"Not available"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-gray-500 text-sm",children:"Last Updated"}),r.jsx("p",{className:"font-medium",children:(0,c.p6)(t.last_updated||new Date)})]}),t.lot_size&&(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-gray-500 text-sm",children:"Lot Size"}),(0,r.jsxs)("p",{className:"font-medium",children:[(0,c.uf)(t.lot_size)," sq ft"]})]})]})]})]}),r.jsx("div",{children:r.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden sticky top-8",children:(0,r.jsxs)("div",{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-6",children:"Financial Analysis"}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Section 8 Fair Market Rent"}),(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,r.jsxs)("p",{className:"text-gray-700 text-sm mb-1",children:["Estimated FMR for ",t.beds," bedroom in ",t.zip]}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.fair_market_rent?(0,c.xG)(t.fair_market_rent)+"/mo":"No data available"})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Mortgage Calculator"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Down Payment (%)"}),r.jsx("input",{type:"range",min:"5",max:"50",step:"5",value:N,onChange:e=>_(parseInt(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[r.jsx("span",{children:"5%"}),(0,r.jsxs)("span",{children:[N,"%"]}),r.jsx("span",{children:"50%"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interest Rate (%)"}),r.jsx("input",{type:"range",min:"3",max:"12",step:"0.1",value:w,onChange:e=>q(parseFloat(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[r.jsx("span",{children:"3%"}),(0,r.jsxs)("span",{children:[w.toFixed(1),"%"]}),r.jsx("span",{children:"12%"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loan Term (years)"}),(0,r.jsxs)("select",{value:P,onChange:e=>S(parseInt(e.target.value)),className:"input w-full",children:[r.jsx("option",{value:"15",children:"15 years"}),r.jsx("option",{value:"20",children:"20 years"}),r.jsx("option",{value:"30",children:"30 years"})]})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Investment Summary"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-gray-500 text-sm",children:"Purchase Price"}),r.jsx("p",{className:"font-bold text-lg",children:(0,c.xG)(t.price)})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,r.jsxs)("p",{className:"text-gray-500 text-sm",children:["Down Payment (",N,"%)"]}),r.jsx("p",{className:"font-medium",children:(0,c.xG)(t.price*(N/100))})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-gray-500 text-sm",children:"Estimated Monthly Payment (PITI)"}),r.jsx("p",{className:"font-medium",children:k?(0,c.xG)(k)+"/mo":"Calculating..."}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Includes principal, interest, taxes and insurance"})]}),(0,r.jsxs)("div",{className:`p-4 rounded-lg ${{positive:"bg-green-50",negative:"bg-red-50",neutral:"bg-gray-50"}[D]}`,children:[r.jsx("p",{className:"text-gray-500 text-sm",children:"Estimated Monthly Cash Flow"}),r.jsx("p",{className:`text-xl font-bold ${{positive:"text-green-600",negative:"text-red-600",neutral:"text-gray-600"}[D]}`,children:null!==I?(0,c.xG)(I)+"/mo":"No FMR data available"})]}),null!==I&&I>0&&r.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:r.jsx("p",{className:"font-medium text-green-800",children:"This property may have positive cash flow based on Section 8 Fair Market Rent!"})})]})]})]})})})]})]})}},68504:(e,s,t)=>{"use strict";function r(e){if(null==e)return"$0";let s=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0});return s.format(e)}function a(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function i(e){return new Intl.NumberFormat("en-US").format(e)}t.d(s,{p6:()=>a,uf:()=>i,xG:()=>r})},33728:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>i,default:()=>o});var r=t(95153);let a=(0,r.createProxy)(String.raw`/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/properties/[id]/page.tsx`),{__esModule:i,$$typeof:l}=a,n=a.default,o=n}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[271,391,294,956,496],()=>t(16933));module.exports=r})();
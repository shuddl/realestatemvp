(()=>{var e={};e.id=664,e.ids=[664],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},37535:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var s=r(67096),i=r(16132),a=r(37284),n=r.n(a),l=r(32564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["properties",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,44891)),"/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/properties/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,65246)),"/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/properties/page.tsx"],u="/properties/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/properties/page",pathname:"/properties",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},55827:(e,t,r)=>{Promise.resolve().then(r.bind(r,26167))},89623:(e,t,r)=>{"use strict";var Symbol=r(86514).Symbol;e.exports=Symbol},51395:(e,t,r)=>{"use strict";var Symbol=r(89623),s=r(30022),i=r(3073),a=Symbol?Symbol.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?s(e):i(e)}},69462:(e,t,r)=>{"use strict";var s=r(48624),i=/^\s+/;e.exports=function(e){return e?e.slice(0,s(e)+1).replace(i,""):e}},39579:e=>{"use strict";var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},30022:(e,t,r)=>{"use strict";var Symbol=r(89623),s=Object.prototype,i=s.hasOwnProperty,a=s.toString,n=Symbol?Symbol.toStringTag:void 0;e.exports=function(e){var t=i.call(e,n),r=e[n];try{e[n]=void 0;var s=!0}catch(e){}var l=a.call(e);return s&&(t?e[n]=r:delete e[n]),l}},3073:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},86514:(e,t,r)=>{"use strict";var s=r(39579),i="object"==typeof self&&self&&self.Object===Object&&self,a=s||i||Function("return this")();e.exports=a},48624:e=>{"use strict";var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},10615:(e,t,r)=>{"use strict";var s=r(3330),i=r(59160),a=r(52843),n=Math.max,l=Math.min;e.exports=function(e,t,r){var o,c,d,u,p,m,x=0,h=!1,v=!1,f=!0;if("function"!=typeof e)throw TypeError("Expected a function");function g(t){var r=o,s=c;return o=c=void 0,x=t,u=e.apply(s,r)}function j(e){var r=e-m,s=e-x;return void 0===m||r>=t||r<0||v&&s>=d}function b(){var e,r,s,a=i();if(j(a))return y(a);p=setTimeout(b,(e=a-m,r=a-x,s=t-e,v?l(s,d-r):s))}function y(e){return(p=void 0,f&&o)?g(e):(o=c=void 0,u)}function w(){var e,r=i(),s=j(r);if(o=arguments,c=this,m=r,s){if(void 0===p)return x=e=m,p=setTimeout(b,t),h?g(e):u;if(v)return clearTimeout(p),p=setTimeout(b,t),g(m)}return void 0===p&&(p=setTimeout(b,t)),u}return t=a(t)||0,s(r)&&(h=!!r.leading,d=(v="maxWait"in r)?n(a(r.maxWait)||0,t):d,f="trailing"in r?!!r.trailing:f),w.cancel=function(){void 0!==p&&clearTimeout(p),x=0,o=m=c=p=void 0},w.flush=function(){return void 0===p?u:y(i())},w}},3330:e=>{"use strict";e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},45861:e=>{"use strict";e.exports=function(e){return null!=e&&"object"==typeof e}},76290:(e,t,r)=>{"use strict";var s=r(51395),i=r(45861);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==s(e)}},59160:(e,t,r)=>{"use strict";var s=r(86514);e.exports=function(){return s.Date.now()}},52843:(e,t,r)=>{"use strict";var s=r(69462),i=r(3330),a=r(76290),n=0/0,l=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return n;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=s(e);var r=o.test(e);return r||c.test(e)?d(e.slice(2),r?2:8):l.test(e)?n:+e}},51018:(e,t,r)=>{"use strict";e.exports=r(27804)},26167:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(53854),i=r(34218),a=r(51018),n=r(73606),l=r(10615),o=r.n(l);function c({filters:e,onFilterChange:t}){let r=(0,a.useRouter)(),n=(0,a.usePathname)(),[l,c]=(0,i.useState)(e);(0,i.useEffect)(()=>{c(e)},[e]);let d=(0,i.useCallback)(o()(e=>{t(e);let s=new URLSearchParams;Object.entries(e).forEach(([e,t])=>{t&&s.append(e,t.toString())});let i=s.toString(),a=i?`${n}?${i}`:n;r.push(a)},500),[n,r,t]),u=e=>{let{name:t,value:r}=e.target,s={...l,[t]:r};c(s),d(s)};return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price Range"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[s.jsx("div",{className:"w-1/2",children:s.jsx("input",{type:"number",name:"minPrice",placeholder:"Min",value:l.minPrice,onChange:u,className:"input w-full"})}),s.jsx("div",{className:"w-1/2",children:s.jsx("input",{type:"number",name:"maxPrice",placeholder:"Max",value:l.maxPrice,onChange:u,className:"input w-full"})})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[s.jsx("div",{className:"w-1/2",children:(0,s.jsxs)("select",{name:"minBeds",value:l.minBeds,onChange:u,className:"input w-full",children:[s.jsx("option",{value:"",children:"Min"}),s.jsx("option",{value:"1",children:"1+"}),s.jsx("option",{value:"2",children:"2+"}),s.jsx("option",{value:"3",children:"3+"}),s.jsx("option",{value:"4",children:"4+"})]})}),s.jsx("div",{className:"w-1/2",children:(0,s.jsxs)("select",{name:"maxBeds",value:l.maxBeds,onChange:u,className:"input w-full",children:[s.jsx("option",{value:"",children:"Max"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5+"})]})})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bathrooms"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[s.jsx("div",{className:"w-1/2",children:(0,s.jsxs)("select",{name:"minBaths",value:l.minBaths,onChange:u,className:"input w-full",children:[s.jsx("option",{value:"",children:"Min"}),s.jsx("option",{value:"1",children:"1+"}),s.jsx("option",{value:"1.5",children:"1.5+"}),s.jsx("option",{value:"2",children:"2+"}),s.jsx("option",{value:"2.5",children:"2.5+"}),s.jsx("option",{value:"3",children:"3+"})]})}),s.jsx("div",{className:"w-1/2",children:(0,s.jsxs)("select",{name:"maxBaths",value:l.maxBaths,onChange:u,className:"input w-full",children:[s.jsx("option",{value:"",children:"Max"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"1.5",children:"1.5"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"2.5",children:"2.5"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4+"})]})})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[s.jsx("div",{className:"w-1/2",children:s.jsx("input",{type:"text",name:"city",placeholder:"City",value:l.city,onChange:u,className:"input w-full"})}),s.jsx("div",{className:"w-1/2",children:s.jsx("input",{type:"text",name:"zip",placeholder:"Zip",value:l.zip,onChange:u,className:"input w-full"})})]})]})]}),s.jsx("div",{className:"mt-4 text-right",children:s.jsx("button",{onClick:()=>{let e={minPrice:"",maxPrice:"",minBeds:"",maxBeds:"",minBaths:"",maxBaths:"",city:"",zip:""};c(e),t(e),r.push(n)},className:"text-sm text-primary hover:text-primary/80 font-medium",children:"Reset Filters"})})]})}function d(){let e=(0,a.useSearchParams)(),[t,r]=(0,i.useState)([]),[l,o]=(0,i.useState)(!0),[d,u]=(0,i.useState)(null),[p,m]=(0,i.useState)(!1),[x,h]=(0,i.useState)(1),[v,f]=(0,i.useState)({minPrice:"",maxPrice:"",minBeds:"",maxBeds:"",minBaths:"",maxBaths:"",city:"",zip:""});(0,i.useEffect)(()=>{let t=e.get("minPrice")||"",r=e.get("maxPrice")||"",s=e.get("minBeds")||"",i=e.get("maxBeds")||"",a=e.get("minBaths")||"",n=e.get("maxBaths")||"",l=e.get("city")||"",o=e.get("zip")||"";f({minPrice:t,maxPrice:r,minBeds:s,maxBeds:i,minBaths:a,maxBaths:n,city:l,zip:o})},[e]),(0,i.useEffect)(()=>{g()},[v,x]);let g=async()=>{o(!0),u(null);try{let e=new URLSearchParams;v.minPrice&&e.append("minPrice",v.minPrice),v.maxPrice&&e.append("maxPrice",v.maxPrice),v.minBeds&&e.append("minBeds",v.minBeds),v.maxBeds&&e.append("maxBeds",v.maxBeds),v.minBaths&&e.append("minBaths",v.minBaths),v.maxBaths&&e.append("maxBaths",v.maxBaths),v.city&&e.append("city",v.city),v.zip&&e.append("zip",v.zip),e.append("limit","12"),e.append("offset",((x-1)*12).toString());let t=await fetch(`/api/properties?${e.toString()}`);if(!t.ok)throw Error("Failed to fetch properties");let s=await t.json();1===x?r(s.properties):r(e=>[...e,...s.properties]),m(s.hasMore)}catch(e){console.error("Error fetching properties:",e),u("Failed to fetch properties. Please try again later.")}finally{o(!1)}};return(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Section 8 Properties"}),s.jsx(c,{filters:v,onFilterChange:e=>{f(e),h(1)}}),d&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-6",children:d}),l&&1===x?s.jsx("div",{className:"flex justify-center my-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):0===t.length?s.jsx("div",{className:"text-center my-12",children:s.jsx("p",{className:"text-gray-500 text-lg",children:"No properties found matching your criteria."})}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:t.map(e=>s.jsx(n.Z,{property:e},e.id))}),p&&s.jsx("div",{className:"flex justify-center mt-8 mb-12",children:s.jsx("button",{onClick:()=>{h(e=>e+1)},disabled:l,className:"btn btn-primary px-6",children:l?"Loading...":"Load More"})})]})]})}},73606:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var s=r(53854),i=r(34218),a=r(41956),n=r.n(a),l=r(75548),o=r.n(l),c=r(554),d=r(62024),u=r(68504);function p({property:e}){let{user:t}=(0,c.a)(),[r,a]=(0,i.useState)(e.is_favorited||!1),[l,p]=(0,i.useState)(!1),m=e.estimated_cash_flow>0?"positive":e.estimated_cash_flow<0?"negative":"neutral",x=async()=>{if(!t){window.location.href=`/login?redirectUrl=/properties/${e.id}`;return}p(!0);try{if(r){let{error:r}=await d.O.from("favorite_properties").delete().eq("user_id",t.id).eq("property_id",e.id);if(r)throw r}else{let{error:r}=await d.O.from("favorite_properties").insert({user_id:t.id,property_id:e.id});if(r)throw r}a(!r)}catch(e){console.error("Error toggling favorite status:",e)}finally{p(!1)}};return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,s.jsxs)("div",{className:"relative h-48 w-full",children:[e.photos_json&&e.photos_json.length>0?s.jsx(n(),{src:e.photos_json[0],alt:e.address,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",className:"object-cover"}):s.jsx("div",{className:"h-full w-full flex items-center justify-center bg-gray-200",children:s.jsx("span",{className:"text-gray-400",children:"No image available"})}),s.jsx("button",{onClick:x,disabled:l,className:"absolute top-2 right-2 p-2 bg-white rounded-full shadow-md hover:bg-gray-100 focus:outline-none","aria-label":r?"Remove from favorites":"Add to favorites",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:r?"currentColor":"none",stroke:"currentColor",className:`w-6 h-6 ${r?"text-red-500":"text-gray-400"}`,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),(0,s.jsxs)("div",{className:"p-4",children:[s.jsx(o(),{href:`/properties/${e.id}`,children:s.jsx("h3",{className:"text-lg font-semibold mb-1 text-gray-900 hover:text-primary",children:e.address})}),(0,s.jsxs)("p",{className:"text-gray-600 mb-2",children:[e.city,", ",e.state," ",e.zip]}),s.jsx("p",{className:"text-xl font-bold text-primary mb-3",children:(0,u.xG)(e.price)}),(0,s.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,s.jsxs)("span",{children:[e.beds," bd"]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,s.jsxs)("span",{children:[e.baths," ba"]})]}),e.sqft&&(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 4h-4m4 0l-5-5"})}),(0,s.jsxs)("span",{children:[e.sqft," sqft"]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 -mx-4 px-4 py-3 mt-3 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Fair Market Rent"}),s.jsx("p",{className:"font-medium",children:e.fair_market_rent?(0,u.xG)(e.fair_market_rent)+"/mo":"No data available"})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Est. Mortgage"}),(0,s.jsxs)("p",{className:"font-medium",children:[(0,u.xG)(e.estimated_mortgage),"/mo"]})]})]}),(0,s.jsxs)("div",{className:"mt-2",children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Est. Cash Flow"}),s.jsx("p",{className:`font-bold ${{positive:"text-green-600",negative:"text-red-600",neutral:"text-gray-600"}[m]}`,children:null!==e.estimated_cash_flow?(0,u.xG)(e.estimated_cash_flow)+"/mo":"No data available"})]})]})]})]})}},68504:(e,t,r)=>{"use strict";function s(e){if(null==e)return"$0";let t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0});return t.format(e)}function i(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function a(e){return new Intl.NumberFormat("en-US").format(e)}r.d(t,{p6:()=>i,uf:()=>a,xG:()=>s})},44891:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>o});var s=r(95153);let i=(0,s.createProxy)(String.raw`/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/properties/page.tsx`),{__esModule:a,$$typeof:n}=i,l=i.default,o=l}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[271,391,956,496],()=>r(37535));module.exports=s})();
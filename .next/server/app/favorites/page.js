(()=>{var e={};e.id=57,e.ids=[57],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},23593:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=t(67096),a=t(16132),i=t(37284),o=t.n(i),l=t(32564),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);t.d(r,n);let d=["",{children:["favorites",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,50019)),"/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/favorites/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,447)),"/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/favorites/page.tsx"],p="/favorites/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/favorites/page",pathname:"/favorites",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},18498:(e,r,t)=>{Promise.resolve().then(t.bind(t,88659))},88659:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var s=t(53854),a=t(34218),i=t(554),o=t(73606),l=t(62024);function n(){let{user:e}=(0,i.useAuth)(),[r,t]=(0,a.useState)([]),[n,d]=(0,a.useState)(!0),[c,p]=(0,a.useState)(null);(0,a.useEffect)(()=>{u()},[e]);let u=async()=>{if(e){d(!0),p(null);try{let{data:r,error:s}=await l.O.from("favorite_properties").select("property_id").eq("user_id",e.id);if(s)throw s;if(0===r.length){t([]),d(!1);return}let a=r.map(e=>e.property_id),{data:i,error:o}=await l.O.from("properties").select("*").in("id",a);if(o)throw o;let n=await Promise.all(i.map(async e=>{let{data:r}=await l.O.from("fmr_data").select("*").eq("zip_code",e.zip).order("year",{ascending:!1}).limit(1),t=null;if(r&&r.length>0)switch(e.beds){case 0:t=r[0].beds_0;break;case 1:t=r[0].beds_1;break;case 2:t=r[0].beds_2;break;case 3:t=r[0].beds_3;break;default:t=r[0].beds_4}let s=e.price,a=.07/12,i=Math.round(.8*s*a*Math.pow(1+a,360)/(Math.pow(1+a,360)-1)+.02*s/12),o=null!==t?t-i:null;return{...e,is_favorited:!0,fair_market_rent:t,estimated_mortgage:i,estimated_cash_flow:o}}));t(n)}catch(e){console.error("Error fetching favorites:",e),p("Failed to fetch your favorite properties. Please try again later.")}finally{d(!1)}}};return e?(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Your Favorite Properties"}),c&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-6",children:c}),n?s.jsx("div",{className:"flex justify-center my-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):0===r.length?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No favorites yet"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't saved any properties to your favorites list yet. Browse properties and add them to your favorites."}),s.jsx("a",{href:"/properties",className:"btn btn-primary inline-block",children:"Browse Properties"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(e=>s.jsx(o.Z,{property:e},e.id))})]}):s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-8",children:(0,s.jsxs)("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:(0,s.jsxs)("p",{className:"text-sm text-yellow-700",children:["Please sign in to view your favorites."," ",s.jsx("a",{href:"/login",className:"font-medium underline text-yellow-700 hover:text-yellow-600",children:"Sign in here"})]})})]})})})}},50019:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>i,default:()=>n});var s=t(95153);let a=(0,s.createProxy)(String.raw`/Users/spencerpro/Documents/GitHub/realestatemvp/src/app/favorites/page.tsx`),{__esModule:i,$$typeof:o}=a,l=a.default,n=l}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[271,825,956,323],()=>t(23593));module.exports=s})();